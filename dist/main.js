"use strict";$.fn.keyboard=function(e){var a={29:0,"02":1,"03":2,"04":3,"05":4,"06":5,"07":6,"08":7,"09":8,"0a":9,"0b":10,"0c":11,"0d":12,10:13,11:14,12:15,13:16,14:17,15:18,16:19,17:20,18:21,19:22,"1a":23,"1b":24,"2b":25,"1e":26,"1f":27,20:28,21:29,22:30,23:31,24:32,25:33,26:34,27:35,28:36,"2c":37,"2d":38,"2e":39,"2f":40,30:41,31:42,32:43,33:44,34:45,35:46},t={shift:!1,caps:!1,altgrp:!1,shift_altgrp:""},o=$(this),r=void 0,l=!1,c=void 0,n={keyboardFile:"",arrayPosition:""},i=void 0,d=void 0,s=void 0,p="",y=!1,k="LTR",b=!1,u="text",g="text",h=void 0;e={language:void 0===e.language?"us":e.language,keyColor:void 0===e.keyColor?"#E0E0E0":e.keyColor,keyTextColor:void 0===e.keyTextColor?"#555555":e.keyTextColor,capsLightColor:void 0===e.capsLightColor?"#3498DB":e.capsLightColor,enterKey:void 0===e.enterKey?"":e.enterKey,tabKey:void 0===e.tabKey?"":e.tabKey,ctrlKey:void 0===e.ctrlKey?"":e.ctrlKey,altKey:void 0===e.altKey?"":e.altKey,spareKey:void 0===e.spareKey?"":e.spareKey,languageKey:void 0===e.languageKey?"":e.languageKey,keyboardPosition:void 0===e.keyboardPosition?"bottom":e.keyboardPosition,inputType:function(e){var a=new Array,t="";void 0!==e&&""!=e?(a=e.trim().split(","),$.each(a,function(e,a){"contenteditable"==a.trim().toString()?t+='[contenteditable="true"], ':"textarea"==a.trim().toString()?t+="textarea, ":t+='input[type="'+a.trim().toString()+'"], '}),t=t.slice(0,-2)):t='input[type="text"], input[type="number"], input[type="password"], input[type="search"], input[type="tel"], input[type="url"], textarea, [contenteditable="true"]';return t}(e.inputType),cancelColor:void 0===e.cancelColor?"#E74C3C":e.cancelColor,cancelTextColor:void 0===e.cancelTextColor?"#FFFFFF":e.cancelTextColor,acceptColor:void 0===e.acceptColor?"#2ECC71":e.acceptColor,acceptTextColor:void 0===e.acceptTextColor?"#FFFFFF":e.acceptTextColor,blackoutColor:void 0===e.blackoutColor?"25, 25, 25, 0.9":e.blackoutColor,allowEscapeCancel:void 0===e.allowEscapeCancel||e.allowEscapeCancel,allowEnterAccept:void 0===e.allowEnterAccept||e.allowEnterAccept,directEnter:void 0!==e.directEnter&&e.directEnter,keyCharacterRegex:void 0===e.keyCharacterRegex?{number:/[0-9]|[eE]|\.|\+|-/,tel:/[0-9]|\.|\+|-|#|\(|\)/}:e.keyCharacterRegex,inputFieldRegex:void 0===e.inputFieldRegex?{number:/^(-)?(((\d+)|(\d+\.(\d+)?)|(\.(\d+)?))([eE]([-+])?(\d+)?)?)?$/}:e.inputFieldRegex};var f={disabled:"",readonly:"",maxlength:"",min:"",max:"",placeholder:""};function v(e){""!=n.keyboardFile&&n.arrayPosition==c?w(e,n.keyboardFile):$.get("languages/"+e+".klc",function(a){n.keyboardFile=a,n.arrayPosition=c,w(e,a)})}function w(t,o){var r,l,c,n,p=void 0,y=void 0,u=void 0,g=new Array,h=void 0;i="",d="",s="",r=(o=o.replace(/\u0000/g,"")).match(/\d(\w)?\s+\w+\s+\d\s+(-1|\w+@?|%%)\s+(-1|\w+@?|%%)\s+(-1|\w+@?|%%)(\s+(-1|\w+@?|%%))?(\s+(-1|\w+@?|%%))?(\s+(-1|\w+@?|%%))?\s+\/\//g),(l=o.indexOf("SHIFTSTATE"))>0&&((p=o.slice(l,o.indexOf("LAYOUT")).trim().split(/\n/g)).splice(0,2),$.each(p,function(e,a){-1==a.indexOf(":")?i+='"default": ':-1!=a.indexOf("Shft  Ctrl Alt")?i+='"shift_altgrp": ':-1!=a.indexOf("Shft  Ctrl")?i+='"ctrl_shift": ':-1!=a.indexOf("Ctrl Alt")?i+='"altgrp": ':-1!=a.indexOf("Ctrl")?i+='"ctrl": ':-1!=a.indexOf("Shft")&&(i+='"shift": '),i+=a.match(/\w{6}\s[0-9]/).toString().slice(-1)+", "}),i=JSON.parse("{"+i.toString().slice(0,-2)+"}")),(c=o.indexOf("DEADKEY"))>0&&((y=o.slice(c,o.indexOf("KEYNAME")).trim().split("DEADKEY")).splice(0,1),$.each(y,function(e,a){(g=a.split(/\n/g)).splice(0,2),h="",$.each(g,function(e,a){h+='"'+a.trim().slice(0,4)+'": "'+a.trim().slice(5,9)+'", '}),h="{"+h.slice(0,-2)+"}",d+='"'+a.trim().slice(0,4)+'": '+h+", "}),d=JSON.parse("{"+d.slice(0,-2)+"}")),(n=o.indexOf("LIGATURE"))>0&&((u=o.slice(n,o.indexOf("KEYNAME")).trim().split(/\n/g)).splice(0,5),$.each(u,function(e,a){a.indexOf("//")>0&&(u[e]=a.trim().split("//")[0].trim().replace(/\t/g," ").replace("  "," ").replace("  "," ").split(" "),u[e].splice(1,1),s+='"'+u[e][0]+'": ',u[e].splice(0,1),$.each(u[e],function(a,t){u[e][a]='"'+t+'"'}),s+="["+u[e]+"], ")}),s=JSON.parse("{"+s.slice(0,-2)+"}")),k="arabic"==t?"RTL":"LTR",function(t){var o=t.toString().split(","),r=new Array,l=new Array(47);$.each(o,function(e,t){r[e]=t.toString().replace(/(\t+|\s+)/g," "),r[e]=r[e].split(" "),void 0!==a[r[e][0]]&&(l[a[r[e][0]]]=r[e])}),$(".keyboard-wrapper").length?(T(),$(".keyboard-row").remove(),!0):($("body").prepend('<div class="keyboard-wrapper"></div>'),e.directEnter||$("body").prepend('<div class="keyboard-blackout-background"></div>'),!1);m(l.slice(0,13)),m(l.slice(13,26)),m(l.slice(26,37)),m(l.slice(37,47)),C("default"),$(".keyboard-action-wrapper").length||e.directEnter||$(".keyboard-wrapper").prepend('<div class="keyboard-action-wrapper"><button class="keyboard-action-button keyboard-cancel-button">Cancel</button><input type="text" class="keyboard-input-field"><button class="keyboard-action-button keyboard-accept-button">Accept</button></div>'),$(".keyboard-row:eq(0)").append('<button class="keyboard-key keyboard-key-lg" data-keyval="backspace">Backspace</button>'),$(".keyboard-row:eq(1)").prepend('<button class="keyboard-key keyboard-key-lg" data-keyval="tab">Tab</button>'),$(".keyboard-row:eq(2)").prepend('<button class="keyboard-key keyboard-key-lg caps-lock-key" data-keyval="caps lock">Caps Lock</button>'),$(".keyboard-row:eq(2)").append('<button class="keyboard-key keyboard-key-lg" data-keyval="enter">Enter</button>'),$(".keyboard-row:eq(3)").prepend('<button class="keyboard-key keyboard-key-lg" data-keyval="shift">Shift</button>'),$(".keyboard-row:eq(3)").append('<button class="keyboard-key keyboard-key-lg" data-keyval="shift">Shift</button>'),$(".keyboard-wrapper").append('<div class="keyboard-row"></div>'),$(".keyboard-row:eq(4)").append('<button class="keyboard-key keyboard-key-lg" data-keyval="ctrl">Ctrl</button>'),$(".keyboard-row:eq(4)").append('<button class="keyboard-key keyboard-key-lg" data-keyval="language">Language</button>'),$(".keyboard-row:eq(4)").append('<button class="keyboard-key keyboard-key-lg" data-keyval="alt">Alt</button>'),$(".keyboard-row:eq(4)").append('<button class="keyboard-key keyboard-key-xl" data-keyval="space">&nbsp;</button>'),$(".keyboard-row:eq(4)").append('<button class="keyboard-key keyboard-key-lg" data-keyval="alt grp">Alt Grp</button>'),$(".keyboard-row:eq(4)").append('<button class="keyboard-key keyboard-key-lg" data-keyval="spare">&nbsp;</button>'),$(".keyboard-row:eq(4)").append('<button class="keyboard-key keyboard-key-lg" data-keyval="ctrl">Ctrl</button>'),c=$(".keyboard-row").width(),n=2*$(".keyboard-key").css("margin-right").match(/[0-9]/),i=void 0,d=void 0,s=void 0,p=(c-15*n)/15,y=void 0,k=c/3,$(".keyboard-row").each(function(){i=$(this).children(".keyboard-key-sm").length,d=$(this).children(".keyboard-key-lg").length,s=$(this).children(".keyboard-key-xl").length,y=(c-(i+d+s)*n-i*p-s*k)/d,$(this).children(".keyboard-key-sm").width(p),$(this).children(".keyboard-key-lg").width(y),$(this).children(".keyboard-key-xl").width(k)}),function(){var a=$(window).width(),t=$(window).height(),o=$(".keyboard-wrapper").height(),r=$(".keyboard-wrapper").width();switch($(".keyboard-key").css("background-color",e.keyColor),$(".keyboard-key").css("color",e.keyTextColor),e.directEnter||($(".keyboard-cancel-button").css("background-color",e.cancelColor),$(".keyboard-cancel-button").css("color",e.cancelTextColor),$(".keyboard-accept-button").css("background-color",e.acceptColor),$(".keyboard-accept-button").css("color",e.acceptTextColor),$(".keyboard-blackout-background").css("background-color","rgba("+e.blackoutColor+")")),e.keyboardPosition){case"top":$(".keyboard-wrapper").css("top","20px");break;case"middle":$(".keyboard-wrapper").css("top",((t-o)/2).toString()+"px");break;default:$(".keyboard-wrapper").css("bottom","20px")}$(".keyboard-wrapper").css("left",((a-r)/2).toString()+"px")}(),b||(e.directEnter||$(".keyboard-blackout-background").hide(),$(".keyboard-wrapper").hide());var c,n,i,d,s,p,y,k}(r)}function m(e){var a=void 0;$(".keyboard-wrapper").append('<div class="keyboard-row"></div>'),$.each(e,function(e,t){var o;a=void 0!==t?{default:x(t[i.default-1],t[1]),shift:x(t[i.shift-1],t[1]),altgrp:x(t[i.altgrp-1],t[1]),shift_altgrp:x(t[i.shift_altgrp-1],t[1])}:{default:"-1",shift:"-1",altgrp:"-1",shift_altgrp:"-1"},o=a,$(".keyboard-row:last").append('<button class="keyboard-key keyboard-key-sm"></button>'),$(".keyboard-key:last").data("keyDataObject",o)})}function x(e,a){var t=e;return"%%"==e?t=s[a]:void 0===e&&(t="-1"),t}function C(e){var a=void 0,o=void 0,r="";!t.caps||t.shift||t.altgrp?t.caps||t.shift||t.altgrp||(e="default"):(e="default",$(".caps-lock-key").addClass("caps-lock-key-active")),t.caps||$(".caps-lock-key").removeClass("caps-lock-key-active"),""!=t.shift_altgrp&&"shift_altgrp"!=e&&(t.shift_altgrp=""),$(".keyboard-key").each(function(){r="";try{a=$(this),4==(o=a.data("keyDataObject"))[e].length?(a.html("&#x"+o[e]+";"),a.data("keyval",a.html())):5==o[e].length&&o[e].match("@")?(a.html("&#x"+o[e].replace("@","")+";"),a.data("keyval",a.html())):o[e].constructor===Array?($.each(o[e],function(e,a){r+="&#x"+a+";"}),a.html(r),a.data("keyval",a.html())):"-1"==o[e]||"%%"==o[e]||0==o[e].length?(a.html("&nbsp;"),a.data("keyval","")):(a.html(o[e]),a.data("keyval",a.html())),t.shift||!t.caps||t.altgrp||(a.html(1==a.html().length?a.html().toUpperCase():a.html()),a.data("keyval",1==a.html().length?a.html():a.data("keyval")))}catch(e){}})}function K(){h.val(""),T(),b=!1,v(e.language[c])}function E(){r.is("input")?r.val(h.val()):r.html(h.val()),h.val(""),T(),b=!1,v(e.language[c])}function T(){for(var e in t)t.hasOwnProperty(e)&&(t[e]=!1)}e.language=e.language.split(","),$.each(e.language,function(a,t){e.language[a]=t.trim()}),c=0,v(e.language[c]),o.on("click touch",e.inputType,function(){if("keyboard-input-field"!=$(this).prop("class")){var a=$(this);$.each(f,function(e){f[e]=void 0===a.prop(e)?"":a.prop(e)}),f.disabled||f.readonly||(r=$(this),h=r,e.directEnter||(h=$(".keyboard-input-field"),r.is("input")?(u=r.prop("type"),g="password"==u?"password":"text",h.prop("placeholder",f.placeholder),h.val(r.val()),h.prop("type",g)):(u="text",h.val(r.html()),h.prop("type","text")),$(".keyboard-blackout-background").show()),$(".keyboard-wrapper").show(),b=!0,h.focus())}}),$(document).on("click touch",".keyboard-key",function(){var a=$(this).data("keyval");!function(a){var o=("0000"+a.charCodeAt(0).toString(16)).slice(-4),r=h[0].selectionStart;if((a=a.replace("&lt;","<").replace("&gt;",">").replace(/\bspace/," ")).length>2)switch(p="",a){case"shift":t.shift=!t.shift,t.caps=!1,t.altgrp=!1,"altgrp"==t.shift_altgrp?(C("shift_altgrp"),t.shift_altgrp=""):"shift"==t.shift_altgrp?(C("shift"),t.shift_altgrp=""):(C("shift"),t.shift_altgrp="shift");break;case"caps lock":t.shift=!1,t.caps=!t.caps,t.altgrp=!1,C("caps");break;case"alt grp":t.shift=!1,t.caps=!1,t.altgrp=!t.altgrp,"shift"==t.shift_altgrp?(C("shift_altgrp"),t.shift_altgrp=""):"altgrp"==t.shift_altgrp?(C("altgrp"),t.shift_altgrp=""):(C("altgrp"),t.shift_altgrp="altgrp");break;case"backspace":h.val(h.val().slice(0,r-1)+h.val().slice(r)),r-=1,h.focus(),h[0].selectionStart=r,h[0].selectionEnd=r;break;case"space":break;case"enter":e.enterKey&&"function"==typeof e.enterKey&&e.enterKey();break;case"tab":e.tabKey&&"function"==typeof e.tabKey&&e.tabKey();break;case"ctrl":e.ctrlKey&&"function"==typeof e.ctrlKey&&e.ctrlKey();break;case"alt":e.altKey&&"function"==typeof e.altKey&&e.altKey();break;case"language":c+1<=e.language.length-1?c++:c=0,T(),v(e.language[c]),e.languageKey&&"function"==typeof e.languageKey&&e.languageKey();break;case"spare":e.spareKey&&e.spareKey}else{if(t.shift=!1,t.altgrp=!1,C("default"),(p=d[o])||y){if(a="",void 0===p&&y){var l=String.fromCharCode("0x"+y[o]);l&&void 0!==y[o]&&(a=l)}y=p}h.attr("dir",k);var n=h.val(),i=void 0;h.val(h.val().slice(0,r)+a+h.val().slice(r)),i=h.val(),("-1"!=f.maxlength&&""!=f.maxlength&&i.length>f.maxlength||"number"==u&&""!=f.max&&"-1"!=f.max&&1*i>1*f.max||"number"==u&&""!=f.min&&"-1"!=f.min&&1*i<1*f.min||a.search(e.keyCharacterRegex[u])<0||i.search(e.inputFieldRegex[u])<0)&&(h.val(n),r--),r+=a.length,h.focus();try{h[0].selectionStart=r,h[0].selectionEnd=r}catch(e){console.log(e),console.log(n),console.log(h.val()),n.length&&n!==h.val()&&h.val(n)}}}(a)}),$(document).on("click touch",".keyboard-cancel-button",function(){K()}),$(document).on("click touch",".keyboard-accept-button",function(){E()}),$(document).on("click touch","*",function(a){if(a.stopPropagation(),b&&e.directEnter){var t=$(this);if(e.inputType.search(t.attr("type"))<1&&e.inputType.search(t.prop("tagName").toLowerCase())<1&&"true"!=t.prop("contenteditable")){for(;t.parent().length&&!t.hasClass("keyboard-wrapper");)t=t.parent();t.hasClass("keyboard-wrapper")||(T(),b=!1,v(e.language[c]))}}}),$(document).on("keydown",function(a){!function(a){if($(".keyboard-wrapper").is(":visible"))switch(a.which){case 13:e.allowEnterAccept&&(E(),a.preventDefault());break;case 27:e.allowEscapeCancel&&(K(),a.preventDefault())}}(a)}),$(window).resize(function(){l||(l=!0,setTimeout(function(){v(e.language[c]),l=!1},500))})};
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImtleWJvYXJkLmpzIl0sIm5hbWVzIjpbIiQiLCJmbiIsImtleWJvYXJkIiwib3B0aW9ucyIsImtleU1hcCIsIjI5IiwiMDIiLCIwMyIsIjA0IiwiMDUiLCIwNiIsIjA3IiwiMDgiLCIwOSIsIjBhIiwiMGIiLCIwYyIsIjBkIiwiMTAiLCIxMSIsIjEyIiwiMTMiLCIxNCIsIjE1IiwiMTYiLCIxNyIsIjE4IiwiMTkiLCIxYSIsIjFiIiwiMmIiLCIxZSIsIjFmIiwiMjAiLCIyMSIsIjIyIiwiMjMiLCIyNCIsIjI1IiwiMjYiLCIyNyIsIjI4IiwiMmMiLCIyZCIsIjJlIiwiMmYiLCIzMCIsIjMxIiwiMzIiLCIzMyIsIjM0IiwiMzUiLCJrZXlTdGF0dXNPYmplY3QiLCJzaGlmdCIsImNhcHMiLCJhbHRncnAiLCJzaGlmdF9hbHRncnAiLCJwYWdlRWxlbWVudCIsInRoaXMiLCJmb2N1c2VkSW5wdXRGaWVsZCIsInJlc2l6ZVRpbWVyQWN0aXZlIiwibGFuZ3VhZ2VBcnJheVBvc2l0aW9uIiwic3RvcmVkS2V5Ym9hcmRPYmplY3QiLCJrZXlib2FyZEZpbGUiLCJhcnJheVBvc2l0aW9uIiwic2hpZnRTdGF0ZU9iamVjdCIsImRlYWRrZXlPYmplY3QiLCJsaWdhdHVyZU9iamVjdCIsImRlYWRrZXlQcmVzc2VkIiwiZGVhZGtleVNldCIsInRleHRGbG93RGlyZWN0aW9uIiwia2V5Ym9hcmRPcGVuIiwiaW5wdXRGaWVsZFR5cGUiLCJrZXlib2FyZElucHV0VHlwZSIsImtleWJvYXJkU3RyZWFtRmllbGQiLCJsYW5ndWFnZSIsImtleUNvbG9yIiwia2V5VGV4dENvbG9yIiwiY2Fwc0xpZ2h0Q29sb3IiLCJlbnRlcktleSIsInRhYktleSIsImN0cmxLZXkiLCJhbHRLZXkiLCJzcGFyZUtleSIsImxhbmd1YWdlS2V5Iiwia2V5Ym9hcmRQb3NpdGlvbiIsImlucHV0VHlwZSIsImlucHV0VHlwZUFycmF5IiwiQXJyYXkiLCJmb3JtYXR0ZWRTdHJpbmciLCJ1bmRlZmluZWQiLCJ0cmltIiwic3BsaXQiLCJlYWNoIiwiaSIsInZhbHVlIiwidG9TdHJpbmciLCJzbGljZSIsInNldElucHV0VHlwZSIsImNhbmNlbENvbG9yIiwiY2FuY2VsVGV4dENvbG9yIiwiYWNjZXB0Q29sb3IiLCJhY2NlcHRUZXh0Q29sb3IiLCJibGFja291dENvbG9yIiwiYWxsb3dFc2NhcGVDYW5jZWwiLCJhbGxvd0VudGVyQWNjZXB0IiwiZGlyZWN0RW50ZXIiLCJrZXlDaGFyYWN0ZXJSZWdleCIsIm51bWJlciIsInRlbCIsImlucHV0RmllbGRSZWdleCIsImlucHV0QXR0cmlidXRlcyIsImRpc2FibGVkIiwicmVhZG9ubHkiLCJtYXhsZW5ndGgiLCJtaW4iLCJtYXgiLCJwbGFjZWhvbGRlciIsInJlYWRLZXlib2FyZEZpbGUiLCJmaWxlIiwicGFyc2VLZXlib2FyZEZpbGUiLCJnZXQiLCJkYXRhIiwia2V5RGF0YSIsInNoaWZ0U3RhdGVMb2NhdGlvbiIsImRlYWRrZXlMb2NhdGlvbiIsImxpZ2F0dXJlTG9jYXRpb24iLCJzaGlmdFN0YXRlRGF0YSIsImRlYWRrZXlEYXRhIiwibGlnYXR1cmVEYXRhIiwidGVtcEFyciIsInRlbXBPYmplY3QiLCJyZXBsYWNlIiwibWF0Y2giLCJpbmRleE9mIiwic3BsaWNlIiwiSlNPTiIsInBhcnNlIiwiX2kiLCJfdmFsdWUiLCJqIiwia2V5TGlzdFN0cmluZyIsImtleUxpc3QiLCJrZXlPYmplY3QiLCJrZXlNYXBBcnJheSIsImxlbmd0aCIsImNsZWFyS2V5Ym9hcmRTdGF0ZSIsInJlbW92ZSIsInByZXBlbmQiLCJnZW5lcmF0ZVJvdyIsInNldEtleXMiLCJhcHBlbmQiLCJyb3dXaWR0aCIsIndpZHRoIiwia2V5UGFkZGluZyIsImNzcyIsInNtYWxsS2V5cyIsImxhcmdlS2V5cyIsInhsYXJnZUtleXMiLCJzbWFsbEtleVdpZHRoIiwibGFyZ2VLZXlXaWR0aCIsInhsYXJnZUtleVdpZHRoIiwiY2hpbGRyZW4iLCJ2aWV3cG9ydFdpZHRoIiwid2luZG93Iiwidmlld3BvcnRIZWlnaHQiLCJoZWlnaHQiLCJrZXlib2FyZEhlaWdodCIsImtleWJvYXJkV2lkdGgiLCJrZXlib2FyZEF0dHJpYnV0ZXMiLCJoaWRlIiwibWF0ZXJpYWxpemVLZXlib2FyZCIsImtleUxpc3RTcGxpdCIsImRlZmF1bHQiLCJkZXRlcm1pbmVLZXkiLCJrZXlWYWx1ZSIsIlZLIiwicmV0dXJuS2V5Iiwia2V5VHlwZSIsImN1cnJlbnRLZXkiLCJ0ZW1wU3RyaW5nIiwiYWRkQ2xhc3MiLCJyZW1vdmVDbGFzcyIsImh0bWwiLCJjb25zdHJ1Y3RvciIsInRvVXBwZXJDYXNlIiwiZXJyIiwiZGlzY2FyZERhdGEiLCJ2YWwiLCJhY2NlcHREYXRhIiwiaXMiLCJwcm9wZXJ0eSIsImhhc093blByb3BlcnR5Iiwib24iLCJwcm9wIiwidGVtcEVsZW1lbnQiLCJzaG93IiwiZm9jdXMiLCJkb2N1bWVudCIsImtleVJlZ2lzdGVyZWQiLCJrZXlQcmVzc2VkIiwiZGVhZGtleUxvb2t1cCIsImNoYXJDb2RlQXQiLCJjYXJldFBvc2l0aW9uIiwic2VsZWN0aW9uU3RhcnQiLCJzZWxlY3Rpb25FbmQiLCJjb21iaW5lZEtleSIsIlN0cmluZyIsImZyb21DaGFyQ29kZSIsImF0dHIiLCJuZXdTdHJpbmciLCJzZWFyY2giLCJjb25zb2xlIiwibG9nIiwiaGFuZGxlS2V5cHJlc3MiLCJlIiwic3RvcFByb3BhZ2F0aW9uIiwiZWxlbWVudExheWVyIiwidG9Mb3dlckNhc2UiLCJwYXJlbnQiLCJoYXNDbGFzcyIsImtleSIsIndoaWNoIiwicHJldmVudERlZmF1bHQiLCJoYXJkd2FyZUtleXByZXNzIiwicmVzaXplIiwic2V0VGltZW91dCJdLCJtYXBwaW5ncyI6ImFBZUFBLEVBQUFDLEdBQUFDLFNBQUEsU0FBQUMsR0FFQSxJQUFBQyxHQUFBQyxHQUFBLEVBQUFDLEtBQUEsRUFBQUMsS0FBQSxFQUFBQyxLQUFBLEVBQUFDLEtBQUEsRUFBQUMsS0FBQSxFQUFBQyxLQUFBLEVBQUFDLEtBQUEsRUFBQUMsS0FBQSxFQUFBQyxLQUFBLEVBQUFDLEtBQUEsR0FBQUMsS0FBQSxHQUFBQyxLQUFBLEdBQUFDLEdBQUEsR0FBQUMsR0FBQSxHQUFBQyxHQUFBLEdBQUFDLEdBQUEsR0FBQUMsR0FBQSxHQUFBQyxHQUFBLEdBQUFDLEdBQUEsR0FBQUMsR0FBQSxHQUFBQyxHQUFBLEdBQUFDLEdBQUEsR0FBQUMsS0FBQSxHQUFBQyxLQUFBLEdBQUFDLEtBQUEsR0FBQUMsS0FBQSxHQUFBQyxLQUFBLEdBQUFDLEdBQUEsR0FBQUMsR0FBQSxHQUFBQyxHQUFBLEdBQUFDLEdBQUEsR0FBQUMsR0FBQSxHQUFBQyxHQUFBLEdBQUFDLEdBQUEsR0FBQUMsR0FBQSxHQUFBQyxHQUFBLEdBQUFDLEtBQUEsR0FBQUMsS0FBQSxHQUFBQyxLQUFBLEdBQUFDLEtBQUEsR0FBQUMsR0FBQSxHQUFBQyxHQUFBLEdBQUFDLEdBQUEsR0FBQUMsR0FBQSxHQUFBQyxHQUFBLEdBQUFDLEdBQUEsSUFDQUMsR0FBQUMsT0FBQSxFQUFBQyxNQUFBLEVBQUFDLFFBQUEsRUFBQUMsYUFBQSxJQUNBQyxFQUFBekQsRUFBQTBELE1BQ0FDLE9BQUFBLEVBQ0FDLEdBQUEsRUFDQUMsT0FBQUEsRUFDQUMsR0FBQUMsYUFBQSxHQUFBQyxjQUFBLElBQ0FDLE9BQUFBLEVBQ0FDLE9BQUFBLEVBQ0FDLE9BQUFBLEVBQ0FDLEVBQUEsR0FDQUMsR0FBQSxFQUNBQyxFQUFBLE1BQ0FDLEdBQUEsRUFFQUMsRUFBQSxPQUNBQyxFQUFBLE9BQ0FDLE9BQUFBLEVBR0F2RSxHQUNBd0UsY0FBQSxJQUFBeEUsRUFBQXdFLFNBQUEsS0FBQXhFLEVBQUF3RSxTQUNBQyxjQUFBLElBQUF6RSxFQUFBeUUsU0FBQSxVQUFBekUsRUFBQXlFLFNBQ0FDLGtCQUFBLElBQUExRSxFQUFBMEUsYUFBQSxVQUFBMUUsRUFBQTBFLGFBQ0FDLG9CQUFBLElBQUEzRSxFQUFBMkUsZUFBQSxVQUFBM0UsRUFBQTJFLGVBQ0FDLGNBQUEsSUFBQTVFLEVBQUE0RSxTQUFBLEdBQUE1RSxFQUFBNEUsU0FDQUMsWUFBQSxJQUFBN0Us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QUE4TCxHQUFBLFlBQ0EsT0FBQStCLEVBQUFDLE9BQ0EsS0FBQSxHQUNBM04sRUFBQXNHLG1CQUNBb0YsSUFDQWdDLEVBQUFFLGtCQUVBLE1BQ0EsS0FBQSxHQUNBNU4sRUFBQXFHLG9CQUNBbUYsSUFDQWtDLEVBQUFFLG1CQW5CQUMsQ0FBQVQsS0E4akJBdk4sRUFBQW9LLFFBQUE2RCxPQUFBLFdBRUFySyxJQUNBQSxHQUFBLEVBQ0FzSyxXQUFBLFdBQ0E1RyxFQUFBbkgsRUFBQXdFLFNBQUFkLElBQ0FELEdBQUEsR0FDQSIsImZpbGUiOiJtYWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLy8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKlxyXG4vLyogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqXHJcbi8vKiAgICAgICAgICAgIE1PSyBQcm9qZWN0IC0gTXVsdGlsaW5ndWFsIE9uc2NyZWVuIEtleWJvYXJkICAgICAgICAgICAgICAgICAgICAgICAgICpcclxuLy8qICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKlxyXG4vLyogICAgICAgICAgICBBdXRob3I6IFNlYW4gTWNRdWF5ICh3d3cuc2Vhbm1jcXVheS5jb20pICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqXHJcbi8vKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICpcclxuLy8qICAgICAgICAgICAgR2l0SHViOiBodHRwczovL2dpdGh1Yi5jb20vc3JtOTg1L21vay1wcm9qZWN0ICAgICAgICAgICAgICAgICAgICAgICAgKlxyXG4vLyogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqXHJcbi8vKiAgICAgICAgICAgIFN0YXJ0ZWQ6IE1hcmNoIDIwMTcgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICpcclxuLy8qICAgICAgICAgICAgVmVyc2lvbjogMS4wICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKlxyXG4vLyogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqXHJcbi8vKiAgICAgICAgICAgIExpY2Vuc2U6IE1JVCAoaHR0cHM6Ly9vcGVuc291cmNlLm9yZy9saWNlbnNlcy9NSVQpICAgICAgICAgICAgICAgICAgICpcclxuLy8qICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKlxyXG4vLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqXHJcblxyXG4kLmZuLmtleWJvYXJkID0gZnVuY3Rpb24gKG9wdGlvbnMpIHtcclxuXHJcbiAgICBsZXQga2V5TWFwID0geyAnMjknOiAwLCAnMDInOiAxLCAnMDMnOiAyLCAnMDQnOiAzLCAnMDUnOiA0LCAnMDYnOiA1LCAnMDcnOiA2LCAnMDgnOiA3LCAnMDknOiA4LCAnMGEnOiA5LCAnMGInOiAxMCwgJzBjJzogMTEsICcwZCc6IDEyLCAnMTAnOiAxMywgJzExJzogMTQsICcxMic6IDE1LCAnMTMnOiAxNiwgJzE0JzogMTcsICcxNSc6IDE4LCAnMTYnOiAxOSwgJzE3JzogMjAsICcxOCc6IDIxLCAnMTknOiAyMiwgJzFhJzogMjMsICcxYic6IDI0LCAnMmInOiAyNSwgJzFlJzogMjYsICcxZic6IDI3LCAnMjAnOiAyOCwgJzIxJzogMjksICcyMic6IDMwLCAnMjMnOiAzMSwgJzI0JzogMzIsICcyNSc6IDMzLCAnMjYnOiAzNCwgJzI3JzogMzUsICcyOCc6IDM2LCAnMmMnOiAzNywgJzJkJzogMzgsICcyZSc6IDM5LCAnMmYnOiA0MCwgJzMwJzogNDEsICczMSc6IDQyLCAnMzInOiA0MywgJzMzJzogNDQsICczNCc6IDQ1LCAnMzUnOiA0NiB9LFxyXG4gICAgICAgIGtleVN0YXR1c09iamVjdCA9IHsgc2hpZnQ6IGZhbHNlLCBjYXBzOiBmYWxzZSwgYWx0Z3JwOiBmYWxzZSwgc2hpZnRfYWx0Z3JwOiAnJyB9LFxyXG4gICAgICAgIHBhZ2VFbGVtZW50ID0gJCh0aGlzKSxcclxuICAgICAgICBmb2N1c2VkSW5wdXRGaWVsZCxcclxuICAgICAgICByZXNpemVUaW1lckFjdGl2ZSA9IGZhbHNlLFxyXG4gICAgICAgIGxhbmd1YWdlQXJyYXlQb3NpdGlvbixcclxuICAgICAgICBzdG9yZWRLZXlib2FyZE9iamVjdCA9IHsga2V5Ym9hcmRGaWxlOiAnJywgYXJyYXlQb3NpdGlvbjogJycgfSxcclxuICAgICAgICBzaGlmdFN0YXRlT2JqZWN0LFxyXG4gICAgICAgIGRlYWRrZXlPYmplY3QsXHJcbiAgICAgICAgbGlnYXR1cmVPYmplY3QsXHJcbiAgICAgICAgZGVhZGtleVByZXNzZWQgPSAnJyxcclxuICAgICAgICBkZWFka2V5U2V0ID0gZmFsc2UsXHJcbiAgICAgICAgdGV4dEZsb3dEaXJlY3Rpb24gPSAnTFRSJyxcclxuICAgICAgICBrZXlib2FyZE9wZW4gPSBmYWxzZSxcclxuICAgICAgICBrZXlib2FyZFdyYXBwZXJQcmVzZW50ID0gZmFsc2UsXHJcbiAgICAgICAgaW5wdXRGaWVsZFR5cGUgPSAndGV4dCcsXHJcbiAgICAgICAga2V5Ym9hcmRJbnB1dFR5cGUgPSAndGV4dCcsXHJcbiAgICAgICAga2V5Ym9hcmRTdHJlYW1GaWVsZDtcclxuXHJcbiAgICAvLyoqKioqRmluZCBhbGwgb2Ygb3VyIGRlZmF1bHQgb3B0aW9ucyBkZWZpbmVkIGhlcmUuKioqKipcclxuICAgIG9wdGlvbnMgPSB7XHJcbiAgICAgICAgbGFuZ3VhZ2U6IHR5cGVvZiAob3B0aW9ucy5sYW5ndWFnZSkgPT09ICd1bmRlZmluZWQnID8gJ3VzJyA6IG9wdGlvbnMubGFuZ3VhZ2UsXHJcbiAgICAgICAga2V5Q29sb3I6IHR5cGVvZiAob3B0aW9ucy5rZXlDb2xvcikgPT09ICd1bmRlZmluZWQnID8gJyNFMEUwRTAnIDogb3B0aW9ucy5rZXlDb2xvcixcclxuICAgICAgICBrZXlUZXh0Q29sb3I6IHR5cGVvZiAob3B0aW9ucy5rZXlUZXh0Q29sb3IpID09PSAndW5kZWZpbmVkJyA/ICcjNTU1NTU1JyA6IG9wdGlvbnMua2V5VGV4dENvbG9yLFxyXG4gICAgICAgIGNhcHNMaWdodENvbG9yOiB0eXBlb2YgKG9wdGlvbnMuY2Fwc0xpZ2h0Q29sb3IpID09PSAndW5kZWZpbmVkJyA/ICcjMzQ5OERCJyA6IG9wdGlvbnMuY2Fwc0xpZ2h0Q29sb3IsXHJcbiAgICAgICAgZW50ZXJLZXk6IHR5cGVvZiAob3B0aW9ucy5lbnRlcktleSkgPT09ICd1bmRlZmluZWQnID8gJycgOiBvcHRpb25zLmVudGVyS2V5LFxyXG4gICAgICAgIHRhYktleTogdHlwZW9mIChvcHRpb25zLnRhYktleSkgPT09ICd1bmRlZmluZWQnID8gJycgOiBvcHRpb25zLnRhYktleSxcclxuICAgICAgICBjdHJsS2V5OiB0eXBlb2YgKG9wdGlvbnMuY3RybEtleSkgPT09ICd1bmRlZmluZWQnID8gJycgOiBvcHRpb25zLmN0cmxLZXksXHJcbiAgICAgICAgYWx0S2V5OiB0eXBlb2YgKG9wdGlvbnMuYWx0S2V5KSA9PT0gJ3VuZGVmaW5lZCcgPyAnJyA6IG9wdGlvbnMuYWx0S2V5LFxyXG4gICAgICAgIHNwYXJlS2V5OiB0eXBlb2YgKG9wdGlvbnMuc3BhcmVLZXkpID09PSAndW5kZWZpbmVkJyA/ICcnIDogb3B0aW9ucy5zcGFyZUtleSxcclxuICAgICAgICBsYW5ndWFnZUtleTogdHlwZW9mIChvcHRpb25zLmxhbmd1YWdlS2V5KSA9PT0gJ3VuZGVmaW5lZCcgPyAnJyA6IG9wdGlvbnMubGFuZ3VhZ2VLZXksXHJcbiAgICAgICAga2V5Ym9hcmRQb3NpdGlvbjogdHlwZW9mIChvcHRpb25zLmtleWJvYXJkUG9zaXRpb24pID09PSAndW5kZWZpbmVkJyA/ICdib3R0b20nIDogb3B0aW9ucy5rZXlib2FyZFBvc2l0aW9uLFxyXG4gICAgICAgIGlucHV0VHlwZTogc2V0SW5wdXRUeXBlKG9wdGlvbnMuaW5wdXRUeXBlKSxcclxuICAgICAgICBjYW5jZWxDb2xvcjogdHlwZW9mIChvcHRpb25zLmNhbmNlbENvbG9yKSA9PT0gJ3VuZGVmaW5lZCcgPyAnI0U3NEMzQycgOiBvcHRpb25zLmNhbmNlbENvbG9yLFxyXG4gICAgICAgIGNhbmNlbFRleHRDb2xvcjogdHlwZW9mIChvcHRpb25zLmNhbmNlbFRleHRDb2xvcikgPT09ICd1bmRlZmluZWQnID8gJyNGRkZGRkYnIDogb3B0aW9ucy5jYW5jZWxUZXh0Q29sb3IsXHJcbiAgICAgICAgYWNjZXB0Q29sb3I6IHR5cGVvZiAob3B0aW9ucy5hY2NlcHRDb2xvcikgPT09ICd1bmRlZmluZWQnID8gJyMyRUNDNzEnIDogb3B0aW9ucy5hY2NlcHRDb2xvcixcclxuICAgICAgICBhY2NlcHRUZXh0Q29sb3I6IHR5cGVvZiAob3B0aW9ucy5hY2NlcHRUZXh0Q29sb3IpID09PSAndW5kZWZpbmVkJyA/ICcjRkZGRkZGJyA6IG9wdGlvbnMuYWNjZXB0VGV4dENvbG9yLFxyXG4gICAgICAgIGJsYWNrb3V0Q29sb3I6IHR5cGVvZiAob3B0aW9ucy5ibGFja291dENvbG9yKSA9PT0gJ3VuZGVmaW5lZCcgPyAnMjUsIDI1LCAyNSwgMC45JyA6IG9wdGlvbnMuYmxhY2tvdXRDb2xvcixcclxuICAgICAgICBhbGxvd0VzY2FwZUNhbmNlbDogdHlwZW9mIChvcHRpb25zLmFsbG93RXNjYXBlQ2FuY2VsKSA9PT0gJ3VuZGVmaW5lZCcgPyB0cnVlIDogb3B0aW9ucy5hbGxvd0VzY2FwZUNhbmNlbCxcclxuICAgICAgICBhbGxvd0VudGVyQWNjZXB0OiB0eXBlb2YgKG9wdGlvbnMuYWxsb3dFbnRlckFjY2VwdCkgPT09ICd1bmRlZmluZWQnID8gdHJ1ZSA6IG9wdGlvbnMuYWxsb3dFbnRlckFjY2VwdCxcclxuICAgICAgICBkaXJlY3RFbnRlcjogdHlwZW9mIChvcHRpb25zLmRpcmVjdEVudGVyKSA9PT0gJ3VuZGVmaW5lZCcgPyBmYWxzZSA6IG9wdGlvbnMuZGlyZWN0RW50ZXIsXHJcbiAgICAgICAga2V5Q2hhcmFjdGVyUmVnZXg6IHR5cGVvZiAob3B0aW9ucy5rZXlDaGFyYWN0ZXJSZWdleCkgPT09ICd1bmRlZmluZWQnID8geyBudW1iZXI6IC9bMC05XXxbZUVdfFxcLnxcXCt8LS8sIHRlbDogL1swLTldfFxcLnxcXCt8LXwjfFxcKHxcXCkvIH0gOiBvcHRpb25zLmtleUNoYXJhY3RlclJlZ2V4LFxyXG4gICAgICAgIGlucHV0RmllbGRSZWdleDogdHlwZW9mIChvcHRpb25zLmlucHV0RmllbGRSZWdleCkgPT09ICd1bmRlZmluZWQnID8geyBudW1iZXI6IC9eKC0pPygoKFxcZCspfChcXGQrXFwuKFxcZCspPyl8KFxcLihcXGQrKT8pKShbZUVdKFstK10pPyhcXGQrKT8pPyk/JC8gfSA6IG9wdGlvbnMuaW5wdXRGaWVsZFJlZ2V4XHJcbiAgICB9O1xyXG5cclxuICAgIC8vKioqKipEZWZpbmUgb3VyIGF0dHJpYnV0ZXMgdGhhdCB3ZSBjYXJlIGFib3V0LioqKioqXHJcbiAgICBsZXQgaW5wdXRBdHRyaWJ1dGVzID0ge1xyXG4gICAgICAgIGRpc2FibGVkOiAnJyxcclxuICAgICAgICByZWFkb25seTogJycsXHJcbiAgICAgICAgbWF4bGVuZ3RoOiAnJyxcclxuICAgICAgICBtaW46ICcnLFxyXG4gICAgICAgIG1heDogJycsXHJcbiAgICAgICAgcGxhY2Vob2xkZXI6ICcnXHJcblxyXG4gICAgfTtcclxuXHJcbiAgICAvLyoqKioqUXVpY2sgY2xlYW51cCBvZiBvdXIgbGFuZ3VhZ2UgYXJyYXkuKioqKipcclxuICAgIG9wdGlvbnMubGFuZ3VhZ2UgPSBvcHRpb25zLmxhbmd1YWdlLnNwbGl0KCcsJyk7XHJcbiAgICAkLmVhY2gob3B0aW9ucy5sYW5ndWFnZSwgZnVuY3Rpb24gKGksIHZhbCkge1xyXG4gICAgICAgIG9wdGlvbnMubGFuZ3VhZ2VbaV0gPSB2YWwudHJpbSgpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgLy8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKlxyXG4gICAgLy8qICAgICAgICAgICAgIFJldHVybiBvdXIgc2VsZWN0ZWQgaW5wdXQgdHlwZXMgYXMgYSBmb3JtYXR0ZWQgc3RyaW5nLiAgICAgICAgICAgICAgKlxyXG4gICAgLy8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKlxyXG4gICAgZnVuY3Rpb24gc2V0SW5wdXRUeXBlKGlucHV0VHlwZSkge1xyXG4gICAgICAgIGxldCBpbnB1dFR5cGVBcnJheSA9IG5ldyBBcnJheSgpLFxyXG4gICAgICAgICAgICBmb3JtYXR0ZWRTdHJpbmcgPSAnJztcclxuXHJcbiAgICAgICAgaWYgKGlucHV0VHlwZSAhPT0gdW5kZWZpbmVkICYmIGlucHV0VHlwZSAhPSAnJykge1xyXG4gICAgICAgICAgICBpbnB1dFR5cGVBcnJheSA9IGlucHV0VHlwZS50cmltKCkuc3BsaXQoJywnKTtcclxuICAgICAgICAgICAgJC5lYWNoKGlucHV0VHlwZUFycmF5LCBmdW5jdGlvbiAoaSwgdmFsdWUpIHtcclxuICAgICAgICAgICAgICAgIGlmICh2YWx1ZS50cmltKCkudG9TdHJpbmcoKSA9PSAnY29udGVudGVkaXRhYmxlJykge1xyXG4gICAgICAgICAgICAgICAgICAgIGZvcm1hdHRlZFN0cmluZyArPSAnW2NvbnRlbnRlZGl0YWJsZT1cInRydWVcIl0sICc7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHZhbHVlLnRyaW0oKS50b1N0cmluZygpID09ICd0ZXh0YXJlYScpIHtcclxuICAgICAgICAgICAgICAgICAgICBmb3JtYXR0ZWRTdHJpbmcgKz0gJ3RleHRhcmVhLCAnO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBmb3JtYXR0ZWRTdHJpbmcgKz0gJ2lucHV0W3R5cGU9XCInICsgdmFsdWUudHJpbSgpLnRvU3RyaW5nKCkgKyAnXCJdLCAnO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgZm9ybWF0dGVkU3RyaW5nID0gZm9ybWF0dGVkU3RyaW5nLnNsaWNlKDAsIC0yKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBmb3JtYXR0ZWRTdHJpbmcgPSAnaW5wdXRbdHlwZT1cInRleHRcIl0sIGlucHV0W3R5cGU9XCJudW1iZXJcIl0sIGlucHV0W3R5cGU9XCJwYXNzd29yZFwiXSwgaW5wdXRbdHlwZT1cInNlYXJjaFwiXSwgaW5wdXRbdHlwZT1cInRlbFwiXSwgaW5wdXRbdHlwZT1cInVybFwiXSwgdGV4dGFyZWEsIFtjb250ZW50ZWRpdGFibGU9XCJ0cnVlXCJdJztcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIChmb3JtYXR0ZWRTdHJpbmcpO1xyXG4gICAgfVxyXG5cclxuICAgIGluaXQoKTtcclxuXHJcbiAgICBmdW5jdGlvbiBpbml0KCkge1xyXG5cclxuICAgICAgICBsYW5ndWFnZUFycmF5UG9zaXRpb24gPSAwO1xyXG5cclxuICAgICAgICByZWFkS2V5Ym9hcmRGaWxlKG9wdGlvbnMubGFuZ3VhZ2VbbGFuZ3VhZ2VBcnJheVBvc2l0aW9uXSk7XHJcblxyXG4gICAgICAgIC8vKioqKipBZGQgb3VyIGV2ZW50IGxpc3RlbmVycyBvbmNlIGV2ZXJ5dGhpbmcgaGFzIGJlZW4gbWF0ZXJpYWxpemVkLioqKioqXHJcbiAgICAgICAgcGFnZUVsZW1lbnQub24oJ2NsaWNrIHRvdWNoJywgb3B0aW9ucy5pbnB1dFR5cGUsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgaWYgKCQodGhpcykucHJvcCgnY2xhc3MnKSAhPSAna2V5Ym9hcmQtaW5wdXQtZmllbGQnKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgLy8qKioqKkxldCdzIGNhcHR1cmUgYSBmZXcgYXR0cmlidXRlcyBhYm91dCBvdXIgaW5wdXQgZmllbGQuKioqKipcclxuICAgICAgICAgICAgICAgIGxldCB0ZW1wRWxlbWVudCA9ICQodGhpcyk7XHJcbiAgICAgICAgICAgICAgICAkLmVhY2goaW5wdXRBdHRyaWJ1dGVzLCBmdW5jdGlvbiAoaSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlucHV0QXR0cmlidXRlc1tpXSA9IHRlbXBFbGVtZW50LnByb3AoaSkgPT09IHVuZGVmaW5lZCA/ICcnIDogdGVtcEVsZW1lbnQucHJvcChpKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmICghaW5wdXRBdHRyaWJ1dGVzLmRpc2FibGVkICYmICFpbnB1dEF0dHJpYnV0ZXMucmVhZG9ubHkpIHtcclxuICAgICAgICAgICAgICAgICAgICBmb2N1c2VkSW5wdXRGaWVsZCA9ICQodGhpcyk7XHJcbiAgICAgICAgICAgICAgICAgICAga2V5Ym9hcmRTdHJlYW1GaWVsZCA9IGZvY3VzZWRJbnB1dEZpZWxkO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAvLyoqKioqSWYgZGlyZWN0IGVudGVyIGVuYWJsZWQsIGRvbid0IGJvdGhlci4qKioqKlxyXG4gICAgICAgICAgICAgICAgICAgIGlmICghb3B0aW9ucy5kaXJlY3RFbnRlcikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBrZXlib2FyZFN0cmVhbUZpZWxkID0gJCgnLmtleWJvYXJkLWlucHV0LWZpZWxkJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChmb2N1c2VkSW5wdXRGaWVsZC5pcygnaW5wdXQnKSkge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlucHV0RmllbGRUeXBlID0gZm9jdXNlZElucHV0RmllbGQucHJvcCgndHlwZScpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAga2V5Ym9hcmRJbnB1dFR5cGUgPSBpbnB1dEZpZWxkVHlwZSA9PSAncGFzc3dvcmQnID8gJ3Bhc3N3b3JkJyA6ICd0ZXh0JztcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBrZXlib2FyZFN0cmVhbUZpZWxkLnByb3AoJ3BsYWNlaG9sZGVyJywgaW5wdXRBdHRyaWJ1dGVzLnBsYWNlaG9sZGVyKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGtleWJvYXJkU3RyZWFtRmllbGQudmFsKGZvY3VzZWRJbnB1dEZpZWxkLnZhbCgpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGtleWJvYXJkU3RyZWFtRmllbGQucHJvcCgndHlwZScsIGtleWJvYXJkSW5wdXRUeXBlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlucHV0RmllbGRUeXBlID0gJ3RleHQnO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAga2V5Ym9hcmRTdHJlYW1GaWVsZC52YWwoZm9jdXNlZElucHV0RmllbGQuaHRtbCgpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGtleWJvYXJkU3RyZWFtRmllbGQucHJvcCgndHlwZScsICd0ZXh0Jyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgJCgnLmtleWJvYXJkLWJsYWNrb3V0LWJhY2tncm91bmQnKS5zaG93KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIC8vKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqXHJcblxyXG4gICAgICAgICAgICAgICAgICAgICQoJy5rZXlib2FyZC13cmFwcGVyJykuc2hvdygpO1xyXG4gICAgICAgICAgICAgICAgICAgIGtleWJvYXJkT3BlbiA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAga2V5Ym9hcmRTdHJlYW1GaWVsZC5mb2N1cygpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIC8vKioqKipMaXN0ZW4gZm9yIGtleXByZXNzZXMuKioqKipcclxuICAgICAgICAkKGRvY3VtZW50KS5vbignY2xpY2sgdG91Y2gnLCAnLmtleWJvYXJkLWtleScsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgbGV0IGtleVJlZ2lzdGVyZWQgPSAkKHRoaXMpLmRhdGEoJ2tleXZhbCcpO1xyXG4gICAgICAgICAgICBoYW5kbGVLZXlwcmVzcyhrZXlSZWdpc3RlcmVkKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgLy8qKioqKkhhbmRsZSBvdXIga2V5Ym9hcmQgY2xvc2UgYnV0dG9uLioqKioqXHJcbiAgICAgICAgJChkb2N1bWVudCkub24oJ2NsaWNrIHRvdWNoJywgJy5rZXlib2FyZC1jYW5jZWwtYnV0dG9uJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBkaXNjYXJkRGF0YSgpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICAvLyoqKioqSGFuZGxlIG91ciBrZXlib2FyZCBhY2NlcHQgYnV0dG9uLioqKioqXHJcbiAgICAgICAgJChkb2N1bWVudCkub24oJ2NsaWNrIHRvdWNoJywgJy5rZXlib2FyZC1hY2NlcHQtYnV0dG9uJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBhY2NlcHREYXRhKCk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIC8vKioqKipIYW5kbGUgY2xvc3VyZSBvZiBkaXJlY3QtZW50ZXIga2V5Ym9hcmQgb24gZWxlbWVudCBjbGlja2F3YXkuKioqKipcclxuICAgICAgICAkKGRvY3VtZW50KS5vbignY2xpY2sgdG91Y2gnLCAnKicsIGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICAgICAgICAgIGlmIChrZXlib2FyZE9wZW4gJiYgb3B0aW9ucy5kaXJlY3RFbnRlcikge1xyXG4gICAgICAgICAgICAgICAgbGV0IGVsZW1lbnRMYXllciA9ICQodGhpcyk7XHJcbiAgICAgICAgICAgICAgICBpZiAob3B0aW9ucy5pbnB1dFR5cGUuc2VhcmNoKGVsZW1lbnRMYXllci5hdHRyKCd0eXBlJykpIDwgMSAmJiBvcHRpb25zLmlucHV0VHlwZS5zZWFyY2goZWxlbWVudExheWVyLnByb3AoJ3RhZ05hbWUnKS50b0xvd2VyQ2FzZSgpKSA8IDEgJiYgZWxlbWVudExheWVyLnByb3AoJ2NvbnRlbnRlZGl0YWJsZScpICE9ICd0cnVlJykge1xyXG4gICAgICAgICAgICAgICAgICAgIHdoaWxlIChlbGVtZW50TGF5ZXIucGFyZW50KCkubGVuZ3RoICYmICFlbGVtZW50TGF5ZXIuaGFzQ2xhc3MoJ2tleWJvYXJkLXdyYXBwZXInKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50TGF5ZXIgPSBlbGVtZW50TGF5ZXIucGFyZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGlmICghZWxlbWVudExheWVyLmhhc0NsYXNzKCdrZXlib2FyZC13cmFwcGVyJykpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2xlYXJLZXlib2FyZFN0YXRlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGtleWJvYXJkT3BlbiA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZWFkS2V5Ym9hcmRGaWxlKG9wdGlvbnMubGFuZ3VhZ2VbbGFuZ3VhZ2VBcnJheVBvc2l0aW9uXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIC8vKioqKipQcm92aWRlIGEgbGl0dGxlIGZ1bmN0aW9uYWxpdHkgZHVyaW5nIGV4dGVybmFsIGtleWJvYXJkIHRlc3RpbmcuKioqKipcclxuICAgICAgICAkKGRvY3VtZW50KS5vbigna2V5ZG93bicsIGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgICAgICAgIGhhcmR3YXJlS2V5cHJlc3MoZSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKlxyXG4gICAgLy8qICAgICAgICAgICAgICAgICAgICBIYW5kbGUgc3BlY2lmaWMgaGFyZHdhcmUga2V5cHJlc3NlcyAgICAgICAgICAgICAgICAgICAgICAgICAgKlxyXG4gICAgLy8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKlxyXG4gICAgZnVuY3Rpb24gaGFyZHdhcmVLZXlwcmVzcyhrZXkpIHtcclxuICAgICAgICBpZiAoJCgnLmtleWJvYXJkLXdyYXBwZXInKS5pcygnOnZpc2libGUnKSkge1xyXG4gICAgICAgICAgICBzd2l0Y2ggKGtleS53aGljaCkge1xyXG4gICAgICAgICAgICAgICAgY2FzZSAxMzpcclxuICAgICAgICAgICAgICAgICAgICBpZiAob3B0aW9ucy5hbGxvd0VudGVyQWNjZXB0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFjY2VwdERhdGEoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAga2V5LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSAyNzpcclxuICAgICAgICAgICAgICAgICAgICBpZiAob3B0aW9ucy5hbGxvd0VzY2FwZUNhbmNlbCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBkaXNjYXJkRGF0YSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBrZXkucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLy8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKlxyXG4gICAgLy8qICAgICAgICAgUmVhZCBvdXIga2V5Ym9hcmQgZmlsZSBhbmQgcGFyc2UgaW5mb3JtYXRpb24gaW50byB1c2FibGUgdGFibGVzICAgICAgICAgKlxyXG4gICAgLy8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKlxyXG4gICAgZnVuY3Rpb24gcmVhZEtleWJvYXJkRmlsZShmaWxlKSB7XHJcbiAgICAgICAgaWYgKHN0b3JlZEtleWJvYXJkT2JqZWN0LmtleWJvYXJkRmlsZSAhPSAnJyAmJiBzdG9yZWRLZXlib2FyZE9iamVjdC5hcnJheVBvc2l0aW9uID09IGxhbmd1YWdlQXJyYXlQb3NpdGlvbikge1xyXG4gICAgICAgICAgICBwYXJzZUtleWJvYXJkRmlsZShmaWxlLCBzdG9yZWRLZXlib2FyZE9iamVjdC5rZXlib2FyZEZpbGUpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICQuZ2V0KCdsYW5ndWFnZXMvJyArIGZpbGUgKyAnLmtsYycsIGZ1bmN0aW9uIChkYXRhKSB7XHJcbiAgICAgICAgICAgICAgICBzdG9yZWRLZXlib2FyZE9iamVjdC5rZXlib2FyZEZpbGUgPSBkYXRhO1xyXG4gICAgICAgICAgICAgICAgc3RvcmVkS2V5Ym9hcmRPYmplY3QuYXJyYXlQb3NpdGlvbiA9IGxhbmd1YWdlQXJyYXlQb3NpdGlvbjtcclxuICAgICAgICAgICAgICAgIHBhcnNlS2V5Ym9hcmRGaWxlKGZpbGUsIGRhdGEpO1xyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8vKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKipcclxuICAgIC8vKiAgICAgICAgICAgICAgICAgICAgICBQYXJzZSBpbmZvcm1hdGlvbiBmcm9tIGtleWJvYXJkIGZpbGUuICAgICAgICAgICAgICAgICAgICAgICpcclxuICAgIC8vKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKipcclxuICAgIGZ1bmN0aW9uIHBhcnNlS2V5Ym9hcmRGaWxlKGZpbGUsIGRhdGEpIHtcclxuICAgICAgICBsZXQga2V5RGF0YSxcclxuICAgICAgICAgICAgc2hpZnRTdGF0ZURhdGEsXHJcbiAgICAgICAgICAgIHNoaWZ0U3RhdGVMb2NhdGlvbiA9ICcnLFxyXG4gICAgICAgICAgICBkZWFka2V5RGF0YSxcclxuICAgICAgICAgICAgZGVhZGtleUxvY2F0aW9uID0gJycsXHJcbiAgICAgICAgICAgIGxpZ2F0dXJlRGF0YSxcclxuICAgICAgICAgICAgbGlnYXR1cmVMb2NhdGlvbiA9ICcnLFxyXG4gICAgICAgICAgICB0ZW1wQXJyID0gbmV3IEFycmF5KCksXHJcbiAgICAgICAgICAgIHRlbXBPYmplY3Q7XHJcblxyXG4gICAgICAgIHNoaWZ0U3RhdGVPYmplY3QgPSAnJztcclxuICAgICAgICBkZWFka2V5T2JqZWN0ID0gJyc7XHJcbiAgICAgICAgbGlnYXR1cmVPYmplY3QgPSAnJztcclxuXHJcbiAgICAgICAgLy8qKioqKkV4dHJhY3Qgb3VyIGtleWJvYXJkIGtleSBkYXRhLioqKioqXHJcbiAgICAgICAgZGF0YSA9IGRhdGEucmVwbGFjZSgvXFx1MDAwMC9nLCAnJyk7XHJcbiAgICAgICAga2V5RGF0YSA9IGRhdGEubWF0Y2goL1xcZChcXHcpP1xccytcXHcrXFxzK1xcZFxccysoLTF8XFx3K0A/fCUlKVxccysoLTF8XFx3K0A/fCUlKVxccysoLTF8XFx3K0A/fCUlKShcXHMrKC0xfFxcdytAP3wlJSkpPyhcXHMrKC0xfFxcdytAP3wlJSkpPyhcXHMrKC0xfFxcdytAP3wlJSkpP1xccytcXC9cXC8vZyk7XHJcblxyXG4gICAgICAgIC8vKioqKipFeHRyYWN0IG91ciBzaGlmdCBzdGF0ZSBkYXRhIGFuZCBjb252ZXJ0IHRvIGxvb2t1cCB0YWJsZS4qKioqKlxyXG4gICAgICAgIHNoaWZ0U3RhdGVMb2NhdGlvbiA9IGRhdGEuaW5kZXhPZignU0hJRlRTVEFURScpO1xyXG4gICAgICAgIGlmIChzaGlmdFN0YXRlTG9jYXRpb24gPiAwKSB7XHJcbiAgICAgICAgICAgIHNoaWZ0U3RhdGVEYXRhID0gZGF0YS5zbGljZShzaGlmdFN0YXRlTG9jYXRpb24sIGRhdGEuaW5kZXhPZignTEFZT1VUJykpLnRyaW0oKS5zcGxpdCgvXFxuL2cpO1xyXG4gICAgICAgICAgICBzaGlmdFN0YXRlRGF0YS5zcGxpY2UoMCwgMik7XHJcbiAgICAgICAgICAgICQuZWFjaChzaGlmdFN0YXRlRGF0YSwgZnVuY3Rpb24gKGksIHZhbHVlKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAodmFsdWUuaW5kZXhPZignOicpID09IC0xKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgc2hpZnRTdGF0ZU9iamVjdCArPSAnXCJkZWZhdWx0XCI6ICc7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHZhbHVlLmluZGV4T2YoJ1NoZnQgIEN0cmwgQWx0JykgIT0gLTEpIHtcclxuICAgICAgICAgICAgICAgICAgICBzaGlmdFN0YXRlT2JqZWN0ICs9ICdcInNoaWZ0X2FsdGdycFwiOiAnO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmICh2YWx1ZS5pbmRleE9mKCdTaGZ0ICBDdHJsJykgIT0gLTEpIHtcclxuICAgICAgICAgICAgICAgICAgICBzaGlmdFN0YXRlT2JqZWN0ICs9ICdcImN0cmxfc2hpZnRcIjogJztcclxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAodmFsdWUuaW5kZXhPZignQ3RybCBBbHQnKSAhPSAtMSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHNoaWZ0U3RhdGVPYmplY3QgKz0gJ1wiYWx0Z3JwXCI6ICc7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHZhbHVlLmluZGV4T2YoJ0N0cmwnKSAhPSAtMSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHNoaWZ0U3RhdGVPYmplY3QgKz0gJ1wiY3RybFwiOiAnO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmICh2YWx1ZS5pbmRleE9mKCdTaGZ0JykgIT0gLTEpIHtcclxuICAgICAgICAgICAgICAgICAgICBzaGlmdFN0YXRlT2JqZWN0ICs9ICdcInNoaWZ0XCI6ICc7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBzaGlmdFN0YXRlT2JqZWN0ICs9IHZhbHVlLm1hdGNoKC9cXHd7Nn1cXHNbMC05XS8pLnRvU3RyaW5nKCkuc2xpY2UoLTEpICsgJywgJztcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIHNoaWZ0U3RhdGVPYmplY3QgPSBKU09OLnBhcnNlKCd7JyArIHNoaWZ0U3RhdGVPYmplY3QudG9TdHJpbmcoKS5zbGljZSgwLCAtMikgKyAnfScpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8qKioqKkV4dHJhY3Qgb3VyIGRlYWRrZXkgZGF0YSBhbmQgY29udmVydCB0byBsb29rdXAgdGFibGUuKioqKipcclxuICAgICAgICBkZWFka2V5TG9jYXRpb24gPSBkYXRhLmluZGV4T2YoJ0RFQURLRVknKTtcclxuICAgICAgICBpZiAoZGVhZGtleUxvY2F0aW9uID4gMCkge1xyXG4gICAgICAgICAgICBkZWFka2V5RGF0YSA9IGRhdGEuc2xpY2UoZGVhZGtleUxvY2F0aW9uLCBkYXRhLmluZGV4T2YoJ0tFWU5BTUUnKSkudHJpbSgpLnNwbGl0KCdERUFES0VZJyk7XHJcbiAgICAgICAgICAgIGRlYWRrZXlEYXRhLnNwbGljZSgwLCAxKTtcclxuICAgICAgICAgICAgJC5lYWNoKGRlYWRrZXlEYXRhLCBmdW5jdGlvbiAoaSwgdmFsdWUpIHtcclxuICAgICAgICAgICAgICAgIHRlbXBBcnIgPSB2YWx1ZS5zcGxpdCgvXFxuL2cpO1xyXG4gICAgICAgICAgICAgICAgdGVtcEFyci5zcGxpY2UoMCwgMik7XHJcbiAgICAgICAgICAgICAgICB0ZW1wT2JqZWN0ID0gJyc7XHJcbiAgICAgICAgICAgICAgICAkLmVhY2godGVtcEFyciwgZnVuY3Rpb24gKF9pLCBfdmFsdWUpIHtcclxuICAgICAgICAgICAgICAgICAgICB0ZW1wT2JqZWN0ICs9ICdcIicgKyBfdmFsdWUudHJpbSgpLnNsaWNlKDAsIDQpICsgJ1wiOiBcIicgKyBfdmFsdWUudHJpbSgpLnNsaWNlKDUsIDkpICsgJ1wiLCAnO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB0ZW1wT2JqZWN0ID0gJ3snICsgdGVtcE9iamVjdC5zbGljZSgwLCAtMikgKyAnfSc7XHJcbiAgICAgICAgICAgICAgICBkZWFka2V5T2JqZWN0ICs9ICdcIicgKyB2YWx1ZS50cmltKCkuc2xpY2UoMCwgNCkgKyAnXCI6ICcgKyB0ZW1wT2JqZWN0ICsgJywgJztcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIGRlYWRrZXlPYmplY3QgPSBKU09OLnBhcnNlKCd7JyArIGRlYWRrZXlPYmplY3Quc2xpY2UoMCwgLTIpICsgJ30nKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vKioqKipFeHRyYWN0IG91ciBsaWdhdHVyZS1nZW5lcmF0ZWQga2V5cyBhbmQgY29udmVydCB0byBsb29rdXAgdGFibGUuKioqKipcclxuICAgICAgICBsaWdhdHVyZUxvY2F0aW9uID0gZGF0YS5pbmRleE9mKCdMSUdBVFVSRScpO1xyXG4gICAgICAgIGlmIChsaWdhdHVyZUxvY2F0aW9uID4gMCkge1xyXG4gICAgICAgICAgICBsaWdhdHVyZURhdGEgPSBkYXRhLnNsaWNlKGxpZ2F0dXJlTG9jYXRpb24sIGRhdGEuaW5kZXhPZignS0VZTkFNRScpKS50cmltKCkuc3BsaXQoL1xcbi9nKTtcclxuICAgICAgICAgICAgbGlnYXR1cmVEYXRhLnNwbGljZSgwLCA1KTtcclxuICAgICAgICAgICAgJC5lYWNoKGxpZ2F0dXJlRGF0YSwgZnVuY3Rpb24gKGksIHZhbHVlKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAodmFsdWUuaW5kZXhPZignLy8nKSA+IDApIHtcclxuICAgICAgICAgICAgICAgICAgICBsaWdhdHVyZURhdGFbaV0gPSB2YWx1ZS50cmltKCkuc3BsaXQoJy8vJylbMF0udHJpbSgpLnJlcGxhY2UoL1xcdC9nLCAnICcpLnJlcGxhY2UoJyAgJywgJyAnKS5yZXBsYWNlKCcgICcsICcgJykuc3BsaXQoJyAnKTtcclxuICAgICAgICAgICAgICAgICAgICBsaWdhdHVyZURhdGFbaV0uc3BsaWNlKDEsIDEpO1xyXG4gICAgICAgICAgICAgICAgICAgIGxpZ2F0dXJlT2JqZWN0ICs9ICdcIicgKyBsaWdhdHVyZURhdGFbaV1bMF0gKyAnXCI6ICc7XHJcbiAgICAgICAgICAgICAgICAgICAgbGlnYXR1cmVEYXRhW2ldLnNwbGljZSgwLCAxKTtcclxuICAgICAgICAgICAgICAgICAgICAkLmVhY2gobGlnYXR1cmVEYXRhW2ldLCBmdW5jdGlvbiAoaiwgX3ZhbHVlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxpZ2F0dXJlRGF0YVtpXVtqXSA9ICdcIicgKyBfdmFsdWUgKyAnXCInO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIGxpZ2F0dXJlT2JqZWN0ICs9ICdbJyArIGxpZ2F0dXJlRGF0YVtpXSArICddLCAnO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgbGlnYXR1cmVPYmplY3QgPSBKU09OLnBhcnNlKCd7JyArIGxpZ2F0dXJlT2JqZWN0LnNsaWNlKDAsIC0yKSArICd9Jyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyoqKioqUmV2ZXJzZSBpbnB1dCBkaXJlY3Rpb24gZm9yIHNwZWNpZmljIGxhbmd1YWdlcy4qKioqKlxyXG4gICAgICAgIGlmIChmaWxlID09ICdhcmFiaWMnKSB7XHJcbiAgICAgICAgICAgIHRleHRGbG93RGlyZWN0aW9uID0gJ1JUTCc7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGV4dEZsb3dEaXJlY3Rpb24gPSAnTFRSJztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIG1hdGVyaWFsaXplS2V5Ym9hcmQoa2V5RGF0YSk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKlxyXG4gICAgLy8qICAgICAgICAgICAgVGhpcyBmdW5jdGlvbiBoYW5kbGVzIHRoZSBtYWluIGJ1aWxkb3V0IG9mIG91ciBrZXlib2FyZC4gICAgICAgICAgICAgKlxyXG4gICAgLy8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKlxyXG4gICAgZnVuY3Rpb24gbWF0ZXJpYWxpemVLZXlib2FyZChrZXlMaXN0U3RyaW5nKSB7XHJcbiAgICAgICAgbGV0IGtleUxpc3QgPSBrZXlMaXN0U3RyaW5nLnRvU3RyaW5nKCkuc3BsaXQoJywnKSxcclxuICAgICAgICAgICAga2V5T2JqZWN0ID0gbmV3IEFycmF5KCksXHJcbiAgICAgICAgICAgIGtleU1hcEFycmF5ID0gbmV3IEFycmF5KDQ3KTtcclxuXHJcbiAgICAgICAgJC5lYWNoKGtleUxpc3QsIGZ1bmN0aW9uIChpLCB2YWx1ZSkge1xyXG4gICAgICAgICAgICBrZXlPYmplY3RbaV0gPSB2YWx1ZS50b1N0cmluZygpLnJlcGxhY2UoLyhcXHQrfFxccyspL2csICcgJyk7XHJcbiAgICAgICAgICAgIGtleU9iamVjdFtpXSA9IGtleU9iamVjdFtpXS5zcGxpdCgnICcpO1xyXG4gICAgICAgICAgICBpZiAoa2V5TWFwW2tleU9iamVjdFtpXVswXV0gIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICAgICAga2V5TWFwQXJyYXlba2V5TWFwW2tleU9iamVjdFtpXVswXV1dID0ga2V5T2JqZWN0W2ldO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGlmICgkKCcua2V5Ym9hcmQtd3JhcHBlcicpLmxlbmd0aCkge1xyXG4gICAgICAgICAgICBkZXN0cm95S2V5cygpO1xyXG4gICAgICAgICAgICBrZXlib2FyZFdyYXBwZXJQcmVzZW50ID0gdHJ1ZTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAkKCdib2R5JykucHJlcGVuZCgnPGRpdiBjbGFzcz1cImtleWJvYXJkLXdyYXBwZXJcIj48L2Rpdj4nKTtcclxuICAgICAgICAgICAgLy8qKioqKklmIGRpcmVjdCBlbnRlciBlbmFibGVkLCBkb24ndCBib3RoZXIuKioqKipcclxuICAgICAgICAgICAgaWYgKCFvcHRpb25zLmRpcmVjdEVudGVyKSB7XHJcbiAgICAgICAgICAgICAgICAkKCdib2R5JykucHJlcGVuZCgnPGRpdiBjbGFzcz1cImtleWJvYXJkLWJsYWNrb3V0LWJhY2tncm91bmRcIj48L2Rpdj4nKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBrZXlib2FyZFdyYXBwZXJQcmVzZW50ID0gZmFsc2U7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBnZW5lcmF0ZVJvdyhrZXlNYXBBcnJheS5zbGljZSgwLCAxMykpO1xyXG4gICAgICAgIGdlbmVyYXRlUm93KGtleU1hcEFycmF5LnNsaWNlKDEzLCAyNikpO1xyXG4gICAgICAgIGdlbmVyYXRlUm93KGtleU1hcEFycmF5LnNsaWNlKDI2LCAzNykpO1xyXG4gICAgICAgIGdlbmVyYXRlUm93KGtleU1hcEFycmF5LnNsaWNlKDM3LCA0NykpO1xyXG5cclxuICAgICAgICBzZXRLZXlzKCdkZWZhdWx0Jyk7XHJcbiAgICAgICAga2V5Ym9hcmRGaWxsb3V0KCk7XHJcbiAgICAgICAgc2l6ZUtleXMoKTtcclxuICAgICAgICBrZXlib2FyZEF0dHJpYnV0ZXMoKTtcclxuICAgICAgICBpZiAoIWtleWJvYXJkT3Blbikge1xyXG4gICAgICAgICAgICAvLyoqKioqSWYgZGlyZWN0IGVudGVyIGVuYWJsZWQsIGRvbid0IGJvdGhlci4qKioqKlxyXG4gICAgICAgICAgICBpZiAoIW9wdGlvbnMuZGlyZWN0RW50ZXIpIHtcclxuICAgICAgICAgICAgICAgICQoJy5rZXlib2FyZC1ibGFja291dC1iYWNrZ3JvdW5kJykuaGlkZSgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICQoJy5rZXlib2FyZC13cmFwcGVyJykuaGlkZSgpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqXHJcbiAgICAvLyogICAgICAgICAgICAgICAgICAgIEFwcGVuZCBlYWNoIGtleSdzIGluZGl2aWR1YWwgb2JqZWN0LiAgICAgICAgICAgICAgICAgICAgICAgICAqXHJcbiAgICAvLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqXHJcbiAgICBmdW5jdGlvbiBhcHBlbmRLZXkoa2V5T2JqZWN0KSB7XHJcbiAgICAgICAgJCgnLmtleWJvYXJkLXJvdzpsYXN0JykuYXBwZW5kKCc8YnV0dG9uIGNsYXNzPVwia2V5Ym9hcmQta2V5IGtleWJvYXJkLWtleS1zbVwiPjwvYnV0dG9uPicpO1xyXG4gICAgICAgICQoJy5rZXlib2FyZC1rZXk6bGFzdCcpLmRhdGEoJ2tleURhdGFPYmplY3QnLCBrZXlPYmplY3QpO1xyXG4gICAgfVxyXG5cclxuICAgIC8vKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKipcclxuICAgIC8vKiAgICAgICAgICAgICAgICAgICAgQ3JlYXRlIHJvdyB3cmFwcGVyIGFuZCBmaWxsIHdpdGgga2V5cy4gICAgICAgICAgICAgICAgICAgICAgICpcclxuICAgIC8vKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKipcclxuICAgIGZ1bmN0aW9uIGdlbmVyYXRlUm93KGtleUxpc3RTcGxpdCkge1xyXG4gICAgICAgIGxldCBrZXlPYmplY3Q7XHJcblxyXG4gICAgICAgICQoJy5rZXlib2FyZC13cmFwcGVyJykuYXBwZW5kKCc8ZGl2IGNsYXNzPVwia2V5Ym9hcmQtcm93XCI+PC9kaXY+Jyk7XHJcbiAgICAgICAgJC5lYWNoKGtleUxpc3RTcGxpdCwgZnVuY3Rpb24gKGksIHZhbHVlKSB7XHJcbiAgICAgICAgICAgIGlmICh2YWx1ZSAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgICAgICBrZXlPYmplY3QgPSB7IGRlZmF1bHQ6IGRldGVybWluZUtleSh2YWx1ZVtzaGlmdFN0YXRlT2JqZWN0LmRlZmF1bHQgLSAxXSwgdmFsdWVbMV0pLCBzaGlmdDogZGV0ZXJtaW5lS2V5KHZhbHVlW3NoaWZ0U3RhdGVPYmplY3Quc2hpZnQgLSAxXSwgdmFsdWVbMV0pLCBhbHRncnA6IGRldGVybWluZUtleSh2YWx1ZVtzaGlmdFN0YXRlT2JqZWN0LmFsdGdycCAtIDFdLCB2YWx1ZVsxXSksIHNoaWZ0X2FsdGdycDogZGV0ZXJtaW5lS2V5KHZhbHVlW3NoaWZ0U3RhdGVPYmplY3Quc2hpZnRfYWx0Z3JwIC0gMV0sIHZhbHVlWzFdKSB9O1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAga2V5T2JqZWN0ID0geyBkZWZhdWx0OiAnLTEnLCBzaGlmdDogJy0xJywgYWx0Z3JwOiAnLTEnLCBzaGlmdF9hbHRncnA6ICctMScgfTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBhcHBlbmRLZXkoa2V5T2JqZWN0KTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICAvLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqXHJcbiAgICAvLyogICAgICAgICAgICAgICAgIFNvcnQgb3V0IGRlYWRrZXlzLCBsaWdhdHVyZSwgYW5kIHVuZGVmaW5lZC4gICAgICAgICAgICAgICAgICAgICAqXHJcbiAgICAvLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqXHJcbiAgICBmdW5jdGlvbiBkZXRlcm1pbmVLZXkoa2V5VmFsdWUsIFZLKSB7XHJcbiAgICAgICAgbGV0IHJldHVybktleSA9IGtleVZhbHVlO1xyXG5cclxuICAgICAgICBpZiAoa2V5VmFsdWUgPT0gJyUlJykge1xyXG4gICAgICAgICAgICByZXR1cm5LZXkgPSBsaWdhdHVyZU9iamVjdFtWS107XHJcbiAgICAgICAgfSBlbHNlIGlmIChrZXlWYWx1ZSA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIHJldHVybktleSA9ICctMSc7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gcmV0dXJuS2V5O1xyXG4gICAgfVxyXG5cclxuICAgIC8vKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKipcclxuICAgIC8vKiAgICAgIEFwcGVuZCBvdXIgZXh0cmEgZnVuY3Rpb24ga2V5cyB0aGF0IHdlIGRpZG4ndCBnZXQgZnJvbSB0aGUgLmtsYyBmaWxlLiAgICAgICpcclxuICAgIC8vKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKipcclxuICAgIGZ1bmN0aW9uIGtleWJvYXJkRmlsbG91dCgpIHtcclxuICAgICAgICBpZiAoISQoJy5rZXlib2FyZC1hY3Rpb24td3JhcHBlcicpLmxlbmd0aCAmJiAhb3B0aW9ucy5kaXJlY3RFbnRlcikge1xyXG4gICAgICAgICAgICAkKCcua2V5Ym9hcmQtd3JhcHBlcicpLnByZXBlbmQoJzxkaXYgY2xhc3M9XCJrZXlib2FyZC1hY3Rpb24td3JhcHBlclwiPjxidXR0b24gY2xhc3M9XCJrZXlib2FyZC1hY3Rpb24tYnV0dG9uIGtleWJvYXJkLWNhbmNlbC1idXR0b25cIj5DYW5jZWw8L2J1dHRvbj48aW5wdXQgdHlwZT1cInRleHRcIiBjbGFzcz1cImtleWJvYXJkLWlucHV0LWZpZWxkXCI+PGJ1dHRvbiBjbGFzcz1cImtleWJvYXJkLWFjdGlvbi1idXR0b24ga2V5Ym9hcmQtYWNjZXB0LWJ1dHRvblwiPkFjY2VwdDwvYnV0dG9uPjwvZGl2PicpO1xyXG4gICAgICAgIH1cclxuICAgICAgICAkKCcua2V5Ym9hcmQtcm93OmVxKDApJykuYXBwZW5kKCc8YnV0dG9uIGNsYXNzPVwia2V5Ym9hcmQta2V5IGtleWJvYXJkLWtleS1sZ1wiIGRhdGEta2V5dmFsPVwiYmFja3NwYWNlXCI+QmFja3NwYWNlPC9idXR0b24+Jyk7XHJcbiAgICAgICAgJCgnLmtleWJvYXJkLXJvdzplcSgxKScpLnByZXBlbmQoJzxidXR0b24gY2xhc3M9XCJrZXlib2FyZC1rZXkga2V5Ym9hcmQta2V5LWxnXCIgZGF0YS1rZXl2YWw9XCJ0YWJcIj5UYWI8L2J1dHRvbj4nKTtcclxuICAgICAgICAkKCcua2V5Ym9hcmQtcm93OmVxKDIpJykucHJlcGVuZCgnPGJ1dHRvbiBjbGFzcz1cImtleWJvYXJkLWtleSBrZXlib2FyZC1rZXktbGcgY2Fwcy1sb2NrLWtleVwiIGRhdGEta2V5dmFsPVwiY2FwcyBsb2NrXCI+Q2FwcyBMb2NrPC9idXR0b24+Jyk7XHJcbiAgICAgICAgJCgnLmtleWJvYXJkLXJvdzplcSgyKScpLmFwcGVuZCgnPGJ1dHRvbiBjbGFzcz1cImtleWJvYXJkLWtleSBrZXlib2FyZC1rZXktbGdcIiBkYXRhLWtleXZhbD1cImVudGVyXCI+RW50ZXI8L2J1dHRvbj4nKTtcclxuICAgICAgICAkKCcua2V5Ym9hcmQtcm93OmVxKDMpJykucHJlcGVuZCgnPGJ1dHRvbiBjbGFzcz1cImtleWJvYXJkLWtleSBrZXlib2FyZC1rZXktbGdcIiBkYXRhLWtleXZhbD1cInNoaWZ0XCI+U2hpZnQ8L2J1dHRvbj4nKTtcclxuICAgICAgICAkKCcua2V5Ym9hcmQtcm93OmVxKDMpJykuYXBwZW5kKCc8YnV0dG9uIGNsYXNzPVwia2V5Ym9hcmQta2V5IGtleWJvYXJkLWtleS1sZ1wiIGRhdGEta2V5dmFsPVwic2hpZnRcIj5TaGlmdDwvYnV0dG9uPicpO1xyXG4gICAgICAgICQoJy5rZXlib2FyZC13cmFwcGVyJykuYXBwZW5kKCc8ZGl2IGNsYXNzPVwia2V5Ym9hcmQtcm93XCI+PC9kaXY+Jyk7XHJcbiAgICAgICAgJCgnLmtleWJvYXJkLXJvdzplcSg0KScpLmFwcGVuZCgnPGJ1dHRvbiBjbGFzcz1cImtleWJvYXJkLWtleSBrZXlib2FyZC1rZXktbGdcIiBkYXRhLWtleXZhbD1cImN0cmxcIj5DdHJsPC9idXR0b24+Jyk7XHJcbiAgICAgICAgJCgnLmtleWJvYXJkLXJvdzplcSg0KScpLmFwcGVuZCgnPGJ1dHRvbiBjbGFzcz1cImtleWJvYXJkLWtleSBrZXlib2FyZC1rZXktbGdcIiBkYXRhLWtleXZhbD1cImxhbmd1YWdlXCI+TGFuZ3VhZ2U8L2J1dHRvbj4nKTtcclxuICAgICAgICAkKCcua2V5Ym9hcmQtcm93OmVxKDQpJykuYXBwZW5kKCc8YnV0dG9uIGNsYXNzPVwia2V5Ym9hcmQta2V5IGtleWJvYXJkLWtleS1sZ1wiIGRhdGEta2V5dmFsPVwiYWx0XCI+QWx0PC9idXR0b24+Jyk7XHJcbiAgICAgICAgJCgnLmtleWJvYXJkLXJvdzplcSg0KScpLmFwcGVuZCgnPGJ1dHRvbiBjbGFzcz1cImtleWJvYXJkLWtleSBrZXlib2FyZC1rZXkteGxcIiBkYXRhLWtleXZhbD1cInNwYWNlXCI+Jm5ic3A7PC9idXR0b24+Jyk7XHJcbiAgICAgICAgJCgnLmtleWJvYXJkLXJvdzplcSg0KScpLmFwcGVuZCgnPGJ1dHRvbiBjbGFzcz1cImtleWJvYXJkLWtleSBrZXlib2FyZC1rZXktbGdcIiBkYXRhLWtleXZhbD1cImFsdCBncnBcIj5BbHQgR3JwPC9idXR0b24+Jyk7XHJcbiAgICAgICAgJCgnLmtleWJvYXJkLXJvdzplcSg0KScpLmFwcGVuZCgnPGJ1dHRvbiBjbGFzcz1cImtleWJvYXJkLWtleSBrZXlib2FyZC1rZXktbGdcIiBkYXRhLWtleXZhbD1cInNwYXJlXCI+Jm5ic3A7PC9idXR0b24+Jyk7XHJcbiAgICAgICAgJCgnLmtleWJvYXJkLXJvdzplcSg0KScpLmFwcGVuZCgnPGJ1dHRvbiBjbGFzcz1cImtleWJvYXJkLWtleSBrZXlib2FyZC1rZXktbGdcIiBkYXRhLWtleXZhbD1cImN0cmxcIj5DdHJsPC9idXR0b24+Jyk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKlxyXG4gICAgLy8qICAgICAgICAgICAgICBBZGp1c3Qgc2l6aW5nIG9mIGtleXMgYmFzZWQgb24gb3VyIGVuYWJsZWQgb3B0aW9ucy4gICAgICAgICAgICAgICAgKlxyXG4gICAgLy8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKlxyXG4gICAgZnVuY3Rpb24gc2l6ZUtleXMoKSB7XHJcbiAgICAgICAgbGV0IHJvd1dpZHRoID0gJCgnLmtleWJvYXJkLXJvdycpLndpZHRoKCksXHJcbiAgICAgICAgICAgIG1heEtleUNvdW50ID0gMTUsXHJcbiAgICAgICAgICAgIGtleVBhZGRpbmcgPSAyICogKCQoJy5rZXlib2FyZC1rZXknKS5jc3MoJ21hcmdpbi1yaWdodCcpKS5tYXRjaCgvWzAtOV0vKSxcclxuICAgICAgICAgICAgc21hbGxLZXlzLFxyXG4gICAgICAgICAgICBsYXJnZUtleXMsXHJcbiAgICAgICAgICAgIHhsYXJnZUtleXMsXHJcbiAgICAgICAgICAgIHNtYWxsS2V5V2lkdGggPSAocm93V2lkdGggLSAobWF4S2V5Q291bnQgKiBrZXlQYWRkaW5nKSkgLyBtYXhLZXlDb3VudCxcclxuICAgICAgICAgICAgbGFyZ2VLZXlXaWR0aCxcclxuICAgICAgICAgICAgeGxhcmdlS2V5V2lkdGggPSByb3dXaWR0aCAvIDM7XHJcblxyXG4gICAgICAgICQoJy5rZXlib2FyZC1yb3cnKS5lYWNoKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgc21hbGxLZXlzID0gJCh0aGlzKS5jaGlsZHJlbignLmtleWJvYXJkLWtleS1zbScpLmxlbmd0aDtcclxuICAgICAgICAgICAgbGFyZ2VLZXlzID0gJCh0aGlzKS5jaGlsZHJlbignLmtleWJvYXJkLWtleS1sZycpLmxlbmd0aDtcclxuICAgICAgICAgICAgeGxhcmdlS2V5cyA9ICQodGhpcykuY2hpbGRyZW4oJy5rZXlib2FyZC1rZXkteGwnKS5sZW5ndGg7XHJcbiAgICAgICAgICAgIGxhcmdlS2V5V2lkdGggPSAocm93V2lkdGggLSAoKHNtYWxsS2V5cyArIGxhcmdlS2V5cyArIHhsYXJnZUtleXMpICoga2V5UGFkZGluZykgLSAoc21hbGxLZXlzICogc21hbGxLZXlXaWR0aCkgLSAoeGxhcmdlS2V5cyAqIHhsYXJnZUtleVdpZHRoKSkgLyBsYXJnZUtleXM7XHJcbiAgICAgICAgICAgICQodGhpcykuY2hpbGRyZW4oJy5rZXlib2FyZC1rZXktc20nKS53aWR0aChzbWFsbEtleVdpZHRoKTtcclxuICAgICAgICAgICAgJCh0aGlzKS5jaGlsZHJlbignLmtleWJvYXJkLWtleS1sZycpLndpZHRoKGxhcmdlS2V5V2lkdGgpO1xyXG4gICAgICAgICAgICAkKHRoaXMpLmNoaWxkcmVuKCcua2V5Ym9hcmQta2V5LXhsJykud2lkdGgoeGxhcmdlS2V5V2lkdGgpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIC8vKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKipcclxuICAgIC8vKiAgICAgICAgICAgICAgICBDeWNsZSBrZXkgdmFsdWVzIGJhc2VkIG9uIGRlcHJlc3NlZCBmdW5jdGlvbiBrZXlzLiAgICAgICAgICAgICAgICpcclxuICAgIC8vKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKipcclxuICAgIGZ1bmN0aW9uIHNldEtleXMoa2V5VHlwZSkge1xyXG4gICAgICAgIGxldCBjdXJyZW50S2V5LFxyXG4gICAgICAgICAgICBrZXlPYmplY3QsXHJcbiAgICAgICAgICAgIHRlbXBTdHJpbmcgPSAnJztcclxuXHJcbiAgICAgICAgLy8qKioqKlNldCBrZXlib2FyZCB0byBkZWZhdWx0IGFuZCBjYXBpdGFsaXplIGxldHRlcnMuKioqKipcclxuICAgICAgICBpZiAoa2V5U3RhdHVzT2JqZWN0LmNhcHMgJiYgIWtleVN0YXR1c09iamVjdC5zaGlmdCAmJiAha2V5U3RhdHVzT2JqZWN0LmFsdGdycCkge1xyXG4gICAgICAgICAgICBrZXlUeXBlID0gJ2RlZmF1bHQnO1xyXG4gICAgICAgICAgICAkKCcuY2Fwcy1sb2NrLWtleScpLmFkZENsYXNzKCdjYXBzLWxvY2sta2V5LWFjdGl2ZScpO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoIWtleVN0YXR1c09iamVjdC5jYXBzICYmICFrZXlTdGF0dXNPYmplY3Quc2hpZnQgJiYgIWtleVN0YXR1c09iamVjdC5hbHRncnApIHtcclxuICAgICAgICAgICAga2V5VHlwZSA9ICdkZWZhdWx0JztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICgha2V5U3RhdHVzT2JqZWN0LmNhcHMpIHtcclxuICAgICAgICAgICAgJCgnLmNhcHMtbG9jay1rZXknKS5yZW1vdmVDbGFzcygnY2Fwcy1sb2NrLWtleS1hY3RpdmUnKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vKioqKipJZiB3ZSBkaWRuJ3QganVzdCBwcmVzcyBbU2hpZnRdICsgW0FsdCBHcnBdLCBjbGVhciBvdXIgdHJhY2tlci4qKioqKlxyXG4gICAgICAgIGlmIChrZXlTdGF0dXNPYmplY3Quc2hpZnRfYWx0Z3JwICE9ICcnICYmIGtleVR5cGUgIT0gJ3NoaWZ0X2FsdGdycCcpIHtcclxuICAgICAgICAgICAga2V5U3RhdHVzT2JqZWN0LnNoaWZ0X2FsdGdycCA9ICcnO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgJCgnLmtleWJvYXJkLWtleScpLmVhY2goZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB0ZW1wU3RyaW5nID0gJyc7XHJcbiAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICBjdXJyZW50S2V5ID0gJCh0aGlzKVxyXG4gICAgICAgICAgICAgICAga2V5T2JqZWN0ID0gY3VycmVudEtleS5kYXRhKCdrZXlEYXRhT2JqZWN0Jyk7XHJcbiAgICAgICAgICAgICAgICBpZiAoa2V5T2JqZWN0W2tleVR5cGVdLmxlbmd0aCA9PSA0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY3VycmVudEtleS5odG1sKCcmI3gnICsga2V5T2JqZWN0W2tleVR5cGVdICsgJzsnKTtcclxuICAgICAgICAgICAgICAgICAgICBjdXJyZW50S2V5LmRhdGEoJ2tleXZhbCcsIGN1cnJlbnRLZXkuaHRtbCgpKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoa2V5T2JqZWN0W2tleVR5cGVdLmxlbmd0aCA9PSA1ICYmIGtleU9iamVjdFtrZXlUeXBlXS5tYXRjaCgnQCcpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY3VycmVudEtleS5odG1sKCcmI3gnICsga2V5T2JqZWN0W2tleVR5cGVdLnJlcGxhY2UoJ0AnLCAnJykgKyAnOycpO1xyXG4gICAgICAgICAgICAgICAgICAgIGN1cnJlbnRLZXkuZGF0YSgna2V5dmFsJywgY3VycmVudEtleS5odG1sKCkpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChrZXlPYmplY3Rba2V5VHlwZV0uY29uc3RydWN0b3IgPT09IEFycmF5KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgJC5lYWNoKGtleU9iamVjdFtrZXlUeXBlXSwgZnVuY3Rpb24gKGksIHZhbHVlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRlbXBTdHJpbmcgKz0gJyYjeCcgKyB2YWx1ZSArICc7JztcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICBjdXJyZW50S2V5Lmh0bWwodGVtcFN0cmluZyk7XHJcbiAgICAgICAgICAgICAgICAgICAgY3VycmVudEtleS5kYXRhKCdrZXl2YWwnLCBjdXJyZW50S2V5Lmh0bWwoKSk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGtleU9iamVjdFtrZXlUeXBlXSA9PSAnLTEnIHx8IGtleU9iamVjdFtrZXlUeXBlXSA9PSAnJSUnIHx8IGtleU9iamVjdFtrZXlUeXBlXS5sZW5ndGggPT0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGN1cnJlbnRLZXkuaHRtbCgnJm5ic3A7Jyk7XHJcbiAgICAgICAgICAgICAgICAgICAgY3VycmVudEtleS5kYXRhKCdrZXl2YWwnLCAnJyk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGN1cnJlbnRLZXkuaHRtbChrZXlPYmplY3Rba2V5VHlwZV0pO1xyXG4gICAgICAgICAgICAgICAgICAgIGN1cnJlbnRLZXkuZGF0YSgna2V5dmFsJywgY3VycmVudEtleS5odG1sKCkpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGlmICgha2V5U3RhdHVzT2JqZWN0LnNoaWZ0ICYmIGtleVN0YXR1c09iamVjdC5jYXBzICYmICFrZXlTdGF0dXNPYmplY3QuYWx0Z3JwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY3VycmVudEtleS5odG1sKGN1cnJlbnRLZXkuaHRtbCgpLmxlbmd0aCA9PSAxID8gY3VycmVudEtleS5odG1sKCkudG9VcHBlckNhc2UoKSA6IGN1cnJlbnRLZXkuaHRtbCgpKTtcclxuICAgICAgICAgICAgICAgICAgICBjdXJyZW50S2V5LmRhdGEoJ2tleXZhbCcsIGN1cnJlbnRLZXkuaHRtbCgpLmxlbmd0aCA9PSAxID8gY3VycmVudEtleS5odG1sKCkgOiBjdXJyZW50S2V5LmRhdGEoJ2tleXZhbCcpKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSBjYXRjaCAoZXJyKSB7XHJcbiAgICAgICAgICAgICAgICAvL05hZGEgQXF1w61cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICAvLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqXHJcbiAgICAvLyogICAgIFJlYWQgYW5kIHN1YnNlcXVlbnRseSB3cml0ZSBvdXIgZGVwcmVzc2VkIGtleSB0byB0aGUgYXBwcm9wcmlhdGUgZm9ybS4gICAgICAqXHJcbiAgICAvLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqXHJcbiAgICBmdW5jdGlvbiBoYW5kbGVLZXlwcmVzcyhrZXlQcmVzc2VkKSB7XHJcbiAgICAgICAgLy8qKioqKkNvbnZlcnQgZGVhZGtleSB0byBoZXggYW5kIHBhZCB3aXRoIHplcm9zIHRvIGVuc3VyZSBpdCdzIGZvdXIgZGlnaXRzLioqKioqXHJcbiAgICAgICAgbGV0IGRlYWRrZXlMb29rdXAgPSAoJzAwMDAnICsga2V5UHJlc3NlZC5jaGFyQ29kZUF0KDApLnRvU3RyaW5nKDE2KSkuc2xpY2UoLTQpLFxyXG4gICAgICAgICAgICBjYXJldFBvc2l0aW9uID0ga2V5Ym9hcmRTdHJlYW1GaWVsZFswXS5zZWxlY3Rpb25TdGFydDtcclxuXHJcbiAgICAgICAga2V5UHJlc3NlZCA9IGtleVByZXNzZWQucmVwbGFjZSgnJmx0OycsICc8JykucmVwbGFjZSgnJmd0OycsICc+JykucmVwbGFjZSgvXFxic3BhY2UvLCAnICcpOyAvL0Fjb3VudCBmb3IgJmx0OyBhbmQgJmd0OyBlc2NhcGluZy5cclxuXHJcbiAgICAgICAgaWYgKGtleVByZXNzZWQubGVuZ3RoID4gMikge1xyXG4gICAgICAgICAgICBkZWFka2V5UHJlc3NlZCA9ICcnO1xyXG4gICAgICAgICAgICBzd2l0Y2ggKGtleVByZXNzZWQpIHtcclxuICAgICAgICAgICAgICAgIGNhc2UgJ3NoaWZ0JzpcclxuICAgICAgICAgICAgICAgICAgICBrZXlTdGF0dXNPYmplY3Quc2hpZnQgPSBrZXlTdGF0dXNPYmplY3Quc2hpZnQgPyBmYWxzZSA6IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAga2V5U3RhdHVzT2JqZWN0LmNhcHMgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICBrZXlTdGF0dXNPYmplY3QuYWx0Z3JwID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGtleVN0YXR1c09iamVjdC5zaGlmdF9hbHRncnAgPT0gJ2FsdGdycCcpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2V0S2V5cygnc2hpZnRfYWx0Z3JwJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGtleVN0YXR1c09iamVjdC5zaGlmdF9hbHRncnAgPSAnJztcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGtleVN0YXR1c09iamVjdC5zaGlmdF9hbHRncnAgPT0gJ3NoaWZ0Jykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzZXRLZXlzKCdzaGlmdCcpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBrZXlTdGF0dXNPYmplY3Quc2hpZnRfYWx0Z3JwID0gJyc7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2V0S2V5cygnc2hpZnQnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAga2V5U3RhdHVzT2JqZWN0LnNoaWZ0X2FsdGdycCA9ICdzaGlmdCc7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSAnY2FwcyBsb2NrJzpcclxuICAgICAgICAgICAgICAgICAgICBrZXlTdGF0dXNPYmplY3Quc2hpZnQgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICBrZXlTdGF0dXNPYmplY3QuY2FwcyA9IGtleVN0YXR1c09iamVjdC5jYXBzID8gZmFsc2UgOiB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgIGtleVN0YXR1c09iamVjdC5hbHRncnAgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICBzZXRLZXlzKCdjYXBzJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlICdhbHQgZ3JwJzpcclxuICAgICAgICAgICAgICAgICAgICBrZXlTdGF0dXNPYmplY3Quc2hpZnQgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICBrZXlTdGF0dXNPYmplY3QuY2FwcyA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgIGtleVN0YXR1c09iamVjdC5hbHRncnAgPSBrZXlTdGF0dXNPYmplY3QuYWx0Z3JwID8gZmFsc2UgOiB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChrZXlTdGF0dXNPYmplY3Quc2hpZnRfYWx0Z3JwID09ICdzaGlmdCcpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2V0S2V5cygnc2hpZnRfYWx0Z3JwJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGtleVN0YXR1c09iamVjdC5zaGlmdF9hbHRncnAgPSAnJztcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGtleVN0YXR1c09iamVjdC5zaGlmdF9hbHRncnAgPT0gJ2FsdGdycCcpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2V0S2V5cygnYWx0Z3JwJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGtleVN0YXR1c09iamVjdC5zaGlmdF9hbHRncnAgPSAnJztcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzZXRLZXlzKCdhbHRncnAnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAga2V5U3RhdHVzT2JqZWN0LnNoaWZ0X2FsdGdycCA9ICdhbHRncnAnO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgJ2JhY2tzcGFjZSc6XHJcbiAgICAgICAgICAgICAgICAgICAga2V5Ym9hcmRTdHJlYW1GaWVsZC52YWwoa2V5Ym9hcmRTdHJlYW1GaWVsZC52YWwoKS5zbGljZSgwLCBjYXJldFBvc2l0aW9uIC0gMSkgKyBrZXlib2FyZFN0cmVhbUZpZWxkLnZhbCgpLnNsaWNlKGNhcmV0UG9zaXRpb24pKTtcclxuICAgICAgICAgICAgICAgICAgICBjYXJldFBvc2l0aW9uIC09IDE7XHJcbiAgICAgICAgICAgICAgICAgICAga2V5Ym9hcmRTdHJlYW1GaWVsZC5mb2N1cygpO1xyXG4gICAgICAgICAgICAgICAgICAgIGtleWJvYXJkU3RyZWFtRmllbGRbMF0uc2VsZWN0aW9uU3RhcnQgPSBjYXJldFBvc2l0aW9uO1xyXG4gICAgICAgICAgICAgICAgICAgIGtleWJvYXJkU3RyZWFtRmllbGRbMF0uc2VsZWN0aW9uRW5kID0gY2FyZXRQb3NpdGlvbjtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgJ3NwYWNlJzpcclxuICAgICAgICAgICAgICAgICAgICAvL1dlIGluc2VydCBhIHNwYWNlIGNoYXJhY3RlciB3aXRoaW4gdGhlIHN0cmluZyBlYWNoIHRpbWUgdGhlIHNwYWNlIGJhciBpcyBwcmVzc2VkLlxyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSAnZW50ZXInOlxyXG4gICAgICAgICAgICAgICAgICAgIC8vVXNlci1kZWZpbmFibGUgY2FsbGJhY2suXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKG9wdGlvbnMuZW50ZXJLZXkgJiYgdHlwZW9mIChvcHRpb25zLmVudGVyS2V5KSA9PT0gJ2Z1bmN0aW9uJykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBvcHRpb25zLmVudGVyS2V5KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSAndGFiJzpcclxuICAgICAgICAgICAgICAgICAgICAvL1VzZXItZGVmaW5hYmxlIGNhbGxiYWNrLlxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChvcHRpb25zLnRhYktleSAmJiB0eXBlb2YgKG9wdGlvbnMudGFiS2V5KSA9PT0gJ2Z1bmN0aW9uJykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBvcHRpb25zLnRhYktleSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgJ2N0cmwnOlxyXG4gICAgICAgICAgICAgICAgICAgIC8vVXNlci1kZWZpbmFibGUgY2FsbGJhY2suXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKG9wdGlvbnMuY3RybEtleSAmJiB0eXBlb2YgKG9wdGlvbnMuY3RybEtleSkgPT09ICdmdW5jdGlvbicpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgb3B0aW9ucy5jdHJsS2V5KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSAnYWx0JzpcclxuICAgICAgICAgICAgICAgICAgICAvL1VzZXItZGVmaW5hYmxlIGNhbGxiYWNrLlxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChvcHRpb25zLmFsdEtleSAmJiB0eXBlb2YgKG9wdGlvbnMuYWx0S2V5KSA9PT0gJ2Z1bmN0aW9uJykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBvcHRpb25zLmFsdEtleSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgJ2xhbmd1YWdlJzpcclxuICAgICAgICAgICAgICAgICAgICBpZiAobGFuZ3VhZ2VBcnJheVBvc2l0aW9uICsgMSA8PSBvcHRpb25zLmxhbmd1YWdlLmxlbmd0aCAtIDEpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGFuZ3VhZ2VBcnJheVBvc2l0aW9uKys7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGFuZ3VhZ2VBcnJheVBvc2l0aW9uID0gMDtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgY2xlYXJLZXlib2FyZFN0YXRlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVhZEtleWJvYXJkRmlsZShvcHRpb25zLmxhbmd1YWdlW2xhbmd1YWdlQXJyYXlQb3NpdGlvbl0pO1xyXG4gICAgICAgICAgICAgICAgICAgIC8vVXNlci1kZWZpbmFibGUgY2FsbGJhY2suXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKG9wdGlvbnMubGFuZ3VhZ2VLZXkgJiYgdHlwZW9mIChvcHRpb25zLmxhbmd1YWdlS2V5KSA9PT0gJ2Z1bmN0aW9uJykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBvcHRpb25zLmxhbmd1YWdlS2V5KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSAnc3BhcmUnOlxyXG4gICAgICAgICAgICAgICAgICAgIC8vVXNlci1kZWZpbmFibGUgY2FsbGJhY2suXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKG9wdGlvbnMuc3BhcmVLZXkgJiYgdHlwZW9mIChvcHRpb25zLnNwYXJlS2V5KSA9PT0gJ2Z1bmN0aW9uJykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvL29wdGlvbnNzcGFyZUtleSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGtleVN0YXR1c09iamVjdC5zaGlmdCA9IGZhbHNlO1xyXG4gICAgICAgICAgICBrZXlTdGF0dXNPYmplY3QuYWx0Z3JwID0gZmFsc2U7XHJcbiAgICAgICAgICAgIHNldEtleXMoJ2RlZmF1bHQnKTtcclxuICAgICAgICAgICAgZGVhZGtleVByZXNzZWQgPSBkZWFka2V5T2JqZWN0W2RlYWRrZXlMb29rdXBdO1xyXG4gICAgICAgICAgICBpZiAoZGVhZGtleVByZXNzZWQgfHwgZGVhZGtleVNldCkge1xyXG4gICAgICAgICAgICAgICAga2V5UHJlc3NlZCA9ICcnO1xyXG4gICAgICAgICAgICAgICAgaWYgKGRlYWRrZXlQcmVzc2VkID09PSB1bmRlZmluZWQgJiYgZGVhZGtleVNldCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCBjb21iaW5lZEtleSA9IFN0cmluZy5mcm9tQ2hhckNvZGUoJzB4JyArIGRlYWRrZXlTZXRbZGVhZGtleUxvb2t1cF0pO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChjb21iaW5lZEtleSAmJiBkZWFka2V5U2V0W2RlYWRrZXlMb29rdXBdICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAga2V5UHJlc3NlZCA9IGNvbWJpbmVkS2V5O1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGRlYWRrZXlTZXQgPSBkZWFka2V5UHJlc3NlZDtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLy8qKioqKldyaXRlIGtleSB2YWx1ZSBhbmQgdXBkYXRlIGlucHV0IGF0dHJpYnV0ZXMuKioqKipcclxuICAgICAgICAgICAga2V5Ym9hcmRTdHJlYW1GaWVsZC5hdHRyKCdkaXInLCB0ZXh0Rmxvd0RpcmVjdGlvbik7XHJcbiAgICAgICAgICAgIC8vKioqKipTdG9yZSBiZWZvcmUgYW5kIGFmdGVyIGNvcGllcyBpbiBjYXNlIHdlIG5lZWQgdG8gcmV2ZXJ0LioqKioqXHJcbiAgICAgICAgICAgIGxldCB0ZW1wU3RyaW5nID0ga2V5Ym9hcmRTdHJlYW1GaWVsZC52YWwoKSxcclxuICAgICAgICAgICAgICAgIG5ld1N0cmluZztcclxuXHJcbiAgICAgICAgICAgIGtleWJvYXJkU3RyZWFtRmllbGQudmFsKGtleWJvYXJkU3RyZWFtRmllbGQudmFsKCkuc2xpY2UoMCwgY2FyZXRQb3NpdGlvbikgKyBrZXlQcmVzc2VkICsga2V5Ym9hcmRTdHJlYW1GaWVsZC52YWwoKS5zbGljZShjYXJldFBvc2l0aW9uKSk7XHJcbiAgICAgICAgICAgIG5ld1N0cmluZyA9IGtleWJvYXJkU3RyZWFtRmllbGQudmFsKCk7XHJcblxyXG4gICAgICAgICAgICAvLyoqKioqSGVyZSB3ZSBjaGVjayBpZiBhZGRpbmcgYSBjaGFyYWN0ZXIgdmlvbGF0ZWQgYW55IHVzZXItZGVmaW5lZCBydWxlcy4gV2UgY2hlY2sgYWZ0ZXIgdGhlIGZhY3QgYmVjYXVzZSBvZiBsaWdhdHVyZSBhbmQgZGVhZCBrZXlzLioqKioqXHJcbiAgICAgICAgICAgIGlmICgoaW5wdXRBdHRyaWJ1dGVzLm1heGxlbmd0aCAhPSAnLTEnICYmIGlucHV0QXR0cmlidXRlcy5tYXhsZW5ndGggIT0gJycgJiYgbmV3U3RyaW5nLmxlbmd0aCA+IGlucHV0QXR0cmlidXRlcy5tYXhsZW5ndGgpIHx8IChpbnB1dEZpZWxkVHlwZSA9PSAnbnVtYmVyJyAmJiBpbnB1dEF0dHJpYnV0ZXMubWF4ICE9ICcnICYmIGlucHV0QXR0cmlidXRlcy5tYXggIT0gJy0xJyAmJiAobmV3U3RyaW5nICogMSkgPiAoaW5wdXRBdHRyaWJ1dGVzLm1heCAqIDEpKSB8fCAoaW5wdXRGaWVsZFR5cGUgPT0gJ251bWJlcicgJiYgaW5wdXRBdHRyaWJ1dGVzLm1pbiAhPSAnJyAmJiBpbnB1dEF0dHJpYnV0ZXMubWluICE9ICctMScgJiYgKG5ld1N0cmluZyAqIDEpIDwgKGlucHV0QXR0cmlidXRlcy5taW4gKiAxKSkgfHwga2V5UHJlc3NlZC5zZWFyY2gob3B0aW9ucy5rZXlDaGFyYWN0ZXJSZWdleFtpbnB1dEZpZWxkVHlwZV0pIDwgMCB8fCBuZXdTdHJpbmcuc2VhcmNoKG9wdGlvbnMuaW5wdXRGaWVsZFJlZ2V4W2lucHV0RmllbGRUeXBlXSkgPCAwKSB7XHJcbiAgICAgICAgICAgICAgICBrZXlib2FyZFN0cmVhbUZpZWxkLnZhbCh0ZW1wU3RyaW5nKTtcclxuICAgICAgICAgICAgICAgIGNhcmV0UG9zaXRpb24tLTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqXHJcblxyXG4gICAgICAgICAgICAvKipcclxuICAgICAgICAgICAgICogSGVyZSB3ZSByZXR1cm4gZm9jdXMgYW5kIHVwZGF0ZSB0aGUgY2FyZXQgcG9zdGlvbi4gV2VcclxuICAgICAgICAgICAgICogYXNzdW1lIHRoYXQgaWYgd2UgdGhyb3cgYW4gZXJyb3IgdGhhdCBzb21ldGhpbmcgaW52YWxpZFxyXG4gICAgICAgICAgICAgKiBoYXBwZW5lZCBzbyB3ZSdsbCBqdXN0IHJldmVydCBiYWNrIHRvIHRoZSBvcmlnaW5hbCB0ZXh0LlxyXG4gICAgICAgICAgICAgKi9cclxuICAgICAgICAgICAgY2FyZXRQb3NpdGlvbiArPSBrZXlQcmVzc2VkLmxlbmd0aDtcclxuICAgICAgICAgICAga2V5Ym9hcmRTdHJlYW1GaWVsZC5mb2N1cygpO1xyXG4gICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAga2V5Ym9hcmRTdHJlYW1GaWVsZFswXS5zZWxlY3Rpb25TdGFydCA9IGNhcmV0UG9zaXRpb247XHJcbiAgICAgICAgICAgICAgICBrZXlib2FyZFN0cmVhbUZpZWxkWzBdLnNlbGVjdGlvbkVuZCA9IGNhcmV0UG9zaXRpb247XHJcbiAgICAgICAgICAgIH0gY2F0Y2ggKGVycikge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coZXJyKVxyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2codGVtcFN0cmluZylcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGtleWJvYXJkU3RyZWFtRmllbGQudmFsKCkpXHJcbiAgICAgICAgICAgICAgICBpZiAodGVtcFN0cmluZy5sZW5ndGggJiYgdGVtcFN0cmluZyAhPT0ga2V5Ym9hcmRTdHJlYW1GaWVsZC52YWwoKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGtleWJvYXJkU3RyZWFtRmllbGQudmFsKHRlbXBTdHJpbmcpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8vKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKipcclxuICAgIC8vKiAgICAgICAgICAgICAgICAgICAgICAgRGlzY2FyZCBrZXlib2FyZCBkYXRhIGFuZCBjbG9zZS4gICAgICAgICAgICAgICAgICAgICAgICAgICpcclxuICAgIC8vKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKipcclxuICAgIGZ1bmN0aW9uIGRpc2NhcmREYXRhKCkge1xyXG4gICAgICAgIGtleWJvYXJkU3RyZWFtRmllbGQudmFsKCcnKTtcclxuICAgICAgICBjbGVhcktleWJvYXJkU3RhdGUoKTtcclxuICAgICAgICBrZXlib2FyZE9wZW4gPSBmYWxzZTtcclxuICAgICAgICByZWFkS2V5Ym9hcmRGaWxlKG9wdGlvbnMubGFuZ3VhZ2VbbGFuZ3VhZ2VBcnJheVBvc2l0aW9uXSk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKlxyXG4gICAgLy8qICAgICAgICAgICAgICAgICAgIFN1Ym1pdCBrZXlib2FyZCBkYXRhIHRvIGZvcm0gYW5kIGNsb3NlLiAgICAgICAgICAgICAgICAgICAgICAgKlxyXG4gICAgLy8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKlxyXG4gICAgZnVuY3Rpb24gYWNjZXB0RGF0YSgpIHtcclxuICAgICAgICBpZiAoZm9jdXNlZElucHV0RmllbGQuaXMoJ2lucHV0JykpIHtcclxuICAgICAgICAgICAgZm9jdXNlZElucHV0RmllbGQudmFsKGtleWJvYXJkU3RyZWFtRmllbGQudmFsKCkpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGZvY3VzZWRJbnB1dEZpZWxkLmh0bWwoa2V5Ym9hcmRTdHJlYW1GaWVsZC52YWwoKSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGtleWJvYXJkU3RyZWFtRmllbGQudmFsKCcnKTtcclxuICAgICAgICBjbGVhcktleWJvYXJkU3RhdGUoKTtcclxuICAgICAgICBrZXlib2FyZE9wZW4gPSBmYWxzZTtcclxuICAgICAgICByZWFkS2V5Ym9hcmRGaWxlKG9wdGlvbnMubGFuZ3VhZ2VbbGFuZ3VhZ2VBcnJheVBvc2l0aW9uXSk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKlxyXG4gICAgLy8qICAgICAgICAgICAgICAgIFByb3ZpZGUgc29tZSBzdHlsaW5nIG9wdGlvbnMgZm9yIG91ciBrZXlib2FyZC4gICAgICAgICAgICAgICAgICAgKlxyXG4gICAgLy8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKlxyXG4gICAgZnVuY3Rpb24ga2V5Ym9hcmRBdHRyaWJ1dGVzKCkge1xyXG4gICAgICAgIGxldCB2aWV3cG9ydFdpZHRoID0gJCh3aW5kb3cpLndpZHRoKCksXHJcbiAgICAgICAgICAgIHZpZXdwb3J0SGVpZ2h0ID0gJCh3aW5kb3cpLmhlaWdodCgpLFxyXG4gICAgICAgICAgICBrZXlib2FyZEhlaWdodCA9ICQoJy5rZXlib2FyZC13cmFwcGVyJykuaGVpZ2h0KCksXHJcbiAgICAgICAgICAgIGtleWJvYXJkV2lkdGggPSAkKCcua2V5Ym9hcmQtd3JhcHBlcicpLndpZHRoKCk7XHJcbiAgICAgICAgJCgnLmtleWJvYXJkLWtleScpLmNzcygnYmFja2dyb3VuZC1jb2xvcicsIG9wdGlvbnMua2V5Q29sb3IpO1xyXG4gICAgICAgICQoJy5rZXlib2FyZC1rZXknKS5jc3MoJ2NvbG9yJywgb3B0aW9ucy5rZXlUZXh0Q29sb3IpO1xyXG4gICAgICAgIC8vKioqKipJZiBkaXJlY3QgZW50ZXIgZW5hYmxlZCwgZG9uJ3QgYm90aGVyIHNldHRpbmcgdGhlc2UuKioqKipcclxuICAgICAgICBpZiAoIW9wdGlvbnMuZGlyZWN0RW50ZXIpIHtcclxuICAgICAgICAgICAgJCgnLmtleWJvYXJkLWNhbmNlbC1idXR0b24nKS5jc3MoJ2JhY2tncm91bmQtY29sb3InLCBvcHRpb25zLmNhbmNlbENvbG9yKTtcclxuICAgICAgICAgICAgJCgnLmtleWJvYXJkLWNhbmNlbC1idXR0b24nKS5jc3MoJ2NvbG9yJywgb3B0aW9ucy5jYW5jZWxUZXh0Q29sb3IpO1xyXG4gICAgICAgICAgICAkKCcua2V5Ym9hcmQtYWNjZXB0LWJ1dHRvbicpLmNzcygnYmFja2dyb3VuZC1jb2xvcicsIG9wdGlvbnMuYWNjZXB0Q29sb3IpO1xyXG4gICAgICAgICAgICAkKCcua2V5Ym9hcmQtYWNjZXB0LWJ1dHRvbicpLmNzcygnY29sb3InLCBvcHRpb25zLmFjY2VwdFRleHRDb2xvcik7XHJcbiAgICAgICAgICAgICQoJy5rZXlib2FyZC1ibGFja291dC1iYWNrZ3JvdW5kJykuY3NzKCdiYWNrZ3JvdW5kLWNvbG9yJywgJ3JnYmEoJyArIG9wdGlvbnMuYmxhY2tvdXRDb2xvciArICcpJyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKipcclxuICAgICAgICBzd2l0Y2ggKG9wdGlvbnMua2V5Ym9hcmRQb3NpdGlvbikge1xyXG4gICAgICAgICAgICBjYXNlICd0b3AnOlxyXG4gICAgICAgICAgICAgICAgJCgnLmtleWJvYXJkLXdyYXBwZXInKS5jc3MoJ3RvcCcsICcyMHB4Jyk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSAnbWlkZGxlJzpcclxuICAgICAgICAgICAgICAgICQoJy5rZXlib2FyZC13cmFwcGVyJykuY3NzKCd0b3AnLCAoKHZpZXdwb3J0SGVpZ2h0IC0ga2V5Ym9hcmRIZWlnaHQpIC8gMikudG9TdHJpbmcoKSArICdweCcpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICAkKCcua2V5Ym9hcmQtd3JhcHBlcicpLmNzcygnYm90dG9tJywgJzIwcHgnKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgJCgnLmtleWJvYXJkLXdyYXBwZXInKS5jc3MoJ2xlZnQnLCAoKHZpZXdwb3J0V2lkdGggLSBrZXlib2FyZFdpZHRoKSAvIDIpLnRvU3RyaW5nKCkgKyAncHgnKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqXHJcbiAgICAvLyogICAgICAgICAgICAgICAgICAgIFN0cmlwIG91ciBrZXlib2FyZCBlbGVtZW50IGZyb20gcGFnZS4gICAgICAgICAgICAgICAgICAgICAgICAqXHJcbiAgICAvLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqXHJcbiAgICBmdW5jdGlvbiBkZXN0cm95S2V5Ym9hcmQoKSB7XHJcbiAgICAgICAgY2xlYXJLZXlib2FyZFN0YXRlKCk7XHJcbiAgICAgICAgJCgnLmtleWJvYXJkLXdyYXBwZXInKS5yZW1vdmUoKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqXHJcbiAgICAvLyogICAgICAgICAgICAgICAgICAgICAgU3RyaXAga2V5cyBmcm9tIGtleWJvYXJkIGVsZW1lbnQuICAgICAgICAgICAgICAgICAgICAgICAgICAqXHJcbiAgICAvLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqXHJcbiAgICBmdW5jdGlvbiBkZXN0cm95S2V5cygpIHtcclxuICAgICAgICBjbGVhcktleWJvYXJkU3RhdGUoKTtcclxuICAgICAgICAkKCcua2V5Ym9hcmQtcm93JykucmVtb3ZlKCk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKlxyXG4gICAgLy8qICAgICAgICAgICAgICAgICAgUmVzZXQgYWxsIG9mIG91ciBrZXlib2FyZCBmdW5jdGlvbiBrZXlzLiAgICAgICAgICAgICAgICAgICAgICAgKlxyXG4gICAgLy8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKlxyXG4gICAgZnVuY3Rpb24gY2xlYXJLZXlib2FyZFN0YXRlKCkge1xyXG4gICAgICAgIGZvciAobGV0IHByb3BlcnR5IGluIGtleVN0YXR1c09iamVjdCkge1xyXG4gICAgICAgICAgICBpZiAoa2V5U3RhdHVzT2JqZWN0Lmhhc093blByb3BlcnR5KHByb3BlcnR5KSkge1xyXG4gICAgICAgICAgICAgICAga2V5U3RhdHVzT2JqZWN0W3Byb3BlcnR5XSA9IGZhbHNlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8vKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKipcclxuICAgIC8vKiAgICAgICAgICAgICAgICAgICAgICAgICBMaXN0ZW4gZm9yIHdpbmRvdyByZXNpemluZy4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICpcclxuICAgIC8vKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKipcclxuICAgICQod2luZG93KS5yZXNpemUoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIC8vKioqKipQcmV2ZW50IG11bHRpcGxlIGZ1bmN0aW9uIGNhbGxzLioqKioqXHJcbiAgICAgICAgaWYgKCFyZXNpemVUaW1lckFjdGl2ZSkge1xyXG4gICAgICAgICAgICByZXNpemVUaW1lckFjdGl2ZSA9IHRydWU7XHJcbiAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgcmVhZEtleWJvYXJkRmlsZShvcHRpb25zLmxhbmd1YWdlW2xhbmd1YWdlQXJyYXlQb3NpdGlvbl0pO1xyXG4gICAgICAgICAgICAgICAgcmVzaXplVGltZXJBY3RpdmUgPSBmYWxzZTtcclxuICAgICAgICAgICAgfSwgNTAwKTtcclxuICAgICAgICB9XHJcbiAgICB9KTtcclxufVxyXG4iXX0=
